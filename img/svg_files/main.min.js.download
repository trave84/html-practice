(function(a,b,c){function d(a){return o.call(a)=="[object Function]"}function e(a){return typeof a=="string"}function f(){}function g(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function h(){var a=p.shift();q=1,a?a.t?m(function(){(a.t=="c"?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){a!="img"&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l={},o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};y[c]===1&&(r=1,y[c]=[],l=b.createElement(a)),a=="object"?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),a!="img"&&(r||y[c]===2?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i(b=="c"?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),p.length==1&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&o.call(a.opera)=="[object Opera]",l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return o.call(a)=="[object Array]"},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,i){var j=b(a),l=j.autoCallback;j.url.split(".").pop().split("?").shift(),j.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]||h),j.instead?j.instead(a,e,f,g,i):(y[j.url]?j.noexec=!0:y[j.url]=1,f.load(j.url,j.forceCSS||!j.forceJS&&"css"==j.url.split(".").pop().split("?").shift()?"c":c,j.noexec,j.attrs,j.timeout),(d(e)||d(l))&&f.load(function(){k(),e&&e(j.origUrl,i,g),l&&l(j.origUrl,i,g),y[j.url]=2})))}function i(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var j,l,m=this.yepnope.loader;if(e(a))g(a,0,m,0);else if(w(a))for(j=0;j<a.length;j++)l=a[j],e(l)?g(l,0,m,0):w(l)?B(l):Object(l)===l&&i(l,m);else Object(a)===a&&i(a,m)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,b.readyState==null&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}})(this,document);(function(a){function e(a){"undefined"!=typeof process&&process.nextTick?process.nextTick(a):window.setTimeout(a,0)}a[0][a[1]]=function j(){var a,g=[],c=[],b=function(k,b){null==a&&(a=k,g=b,e(function(){for(var a=0;a<c.length;a++)c[a]()}))};b.then=function(b,l){var d=j(),h=function(){try{var c=a?b:l;if("function"==typeof c){var f=c.apply(null,g);f&&"function"==typeof f.then?f.then(function(a){d(!0,[a])},function(a){d(!1,[a])}):d(!0,[f])}else d(a,g)}catch(e){d(!1,[e])}};null!=a?e(h):c.push(h);return d};b.always=function(a){return b.then(a,a)};b.error=function(a){return b.then(0,a)};return b}})("undefined"===typeof module?[window,"PinkySwear"]:[module,"exports"]);(function(){"use strict";var a="0.7.1",b=1;if(!Object.create)var c=function(){};var d=Array.prototype.slice,e={attributes:{},eventHandlers:{"-1":{}},guid:-1,addEvent:function(a){e.eventHandlers[a.guid][a.type]||(e.eventHandlers[a.guid][a.type]=[]),e.eventHandlers[a.guid][a.type].push({guid:a.guid,handler:a.handler,scope:a.scope,type:a.type})},addEventHandler:function(a,b,c){var d={},f;typeof a=="string"?(f=c||!1,d[a]=b):(f=b||!1,d=a);for(var g in d){var h=d[g],i=g.split(" ");for(var j=0,k=i.length;j<k;j++){var l=i[j];e.addEvent.call(this,{guid:this._guid||this._.guid,handler:h,scope:f,type:l})}}},addGuid:function(a,c){if(!a._guid||!!c)a._guid=b++,e.attributes[a._guid]={},e.eventHandlers[a._guid]={}},attr:function(a){return e.attributes[a]},clone:function(a){return e.extend({},a)},create:function(a){if(Object.create)return Object.create(a);c.prototype=a;return new c},createSubclass:function(a,b){function g(){if(this instanceof g)this.on&&e.addGuid(this,!0),d.apply(this,arguments);else throw new Error("Please use 'new' when initializing Stapes classes")}a=a||{},b=b||!1;var c=a.superclass.prototype,d=a.hasOwnProperty("constructor")?a.constructor:function(){};b&&e.extend(c,f),g.prototype=e.create(c),g.prototype.constructor=g,e.extend(g,{extend:function(){return e.extendThis.apply(this,arguments)},parent:c,proto:function(){return e.extendThis.apply(this.prototype,arguments)},subclass:function(a){a=a||{},a.superclass=this;return e.createSubclass(a)}});for(var h in a)h!=="constructor"&&h!=="superclass"&&(g.prototype[h]=a[h]);return g},emitEvents:function(a,b,c,f){c=c||!1,f=f||this._guid;var g=d.call(e.eventHandlers[f][a]);for(var h=0,i=g.length;h<i;h++){var j=e.extend({},g[h]),k=j.scope?j.scope:this;c&&(j.type=c),j.scope=k,j.handler.call(j.scope,b,j)}},extend:function(){var a=d.call(arguments),b=a.shift();for(var c=0,e=a.length;c<e;c++){var f=a[c];for(var g in f)b[g]=f[g]}return b},extendThis:function(){var a=d.call(arguments);a.unshift(this);return e.extend.apply(this,a)},makeUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,c=a=="x"?b:b&3|8;return c.toString(16)})},removeAttribute:function(a,b){b=b||!1;var c=e.trim(a).split(" ");for(var d=0,f=c.length;d<f;d++){var g=e.trim(c[d]);g&&(delete e.attr(this._guid)[g],b||(this.emit("change",g),this.emit("change:"+g),this.emit("remove",g),this.emit("remove:"+g)))}},removeEventHandler:function(a,b){var c=e.eventHandlers[this._guid];if(a&&b){c=c[a];if(!c)return;for(var d=0,f=c.length,g;d<f;d++)g=c[d].handler,g&&g===b&&(c.splice(d--,1),f--)}else a?delete c[a]:e.eventHandlers[this._guid]={}},setAttribute:function(a,b,c){c=c||!1;var d=this.has(a),f=e.attr(this._guid)[a];if(b!==f){e.attr(this._guid)[a]=b;if(c)return;this.emit("change",a),this.emit("change:"+a,b);var g={key:a,newValue:b,oldValue:f||null};this.emit("mutate",g),this.emit("mutate:"+a,g);var h=d?"update":"create";this.emit(h,a),this.emit(h+":"+a,b)}},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},typeOf:function(a){return a===null||typeof a=="undefined"?String(a):Object.prototype.toString.call(a).replace(/\[object |\]/g,"").toLowerCase()},updateAttribute:function(a,b,c){var d=this.get(a);e.typeOf(d)==="object"&&(d=e.clone(d));var f=b.call(this,d,a);e.setAttribute.call(this,a,f,c||!1)}},f={emit:function(a,b){b=typeof b=="undefined"?null:b;var c=a.split(" ");for(var d=0,f=c.length;d<f;d++){var g=c[d];e.eventHandlers[-1].all&&e.emitEvents.call(this,"all",b,g,-1),e.eventHandlers[-1][g]&&e.emitEvents.call(this,g,b,g,-1),typeof this._guid=="number"&&(e.eventHandlers[this._guid].all&&e.emitEvents.call(this,"all",b,g),e.eventHandlers[this._guid][g]&&e.emitEvents.call(this,g,b))}},off:function(){e.removeEventHandler.apply(this,arguments)},on:function(){e.addEventHandler.apply(this,arguments)}};e.Module=function(){},e.Module.prototype={create:function(){throw new Error("".concat("create() on Stapes modules no longer works from 0.8.0. ","Check the docs."))},each:function(a,b){var c=e.attr(this._guid);for(var d in c){var f=c[d];a.call(b||this,f,d)}},extend:function(){return e.extendThis.apply(this,arguments)},filter:function(a){var b=[],c=e.attr(this._guid);for(var d in c)a.call(this,c[d],d)&&b.push(c[d]);return b},get:function(a){if(typeof a=="string")return this.has(a)?e.attr(this._guid)[a]:null;if(typeof a=="function"){var b=this.filter(a);return b.length?b[0]:null}},getAll:function(){return e.clone(e.attr(this._guid))},getAllAsArray:function(){var a=[],b=e.attr(this._guid);for(var c in b){var d=b[c];e.typeOf(d)==="object"&&!d.id&&(d.id=c),a.push(d)}return a},has:function(a){return typeof e.attr(this._guid)[a]!="undefined"},map:function(a,b){var c=[];this.each(function(d,e){c.push(a.call(b||this,d,e))},b||this);return c},push:function(a,b){if(e.typeOf(a)==="array")for(var c=0,d=a.length;c<d;c++)e.setAttribute.call(this,e.makeUuid(),a[c]);else e.setAttribute.call(this,e.makeUuid(),a,b||!1);return this},remove:function(a,b){typeof a=="function"?this.each(function(c,d){a(c)&&e.removeAttribute.call(this,d,b)}):e.removeAttribute.call(this,a,b||!1);return this},set:function(a,b,c){if(typeof a=="object")for(var d in a)e.setAttribute.call(this,d,a[d]);else e.setAttribute.call(this,a,b,c||!1);return this},size:function(){var a=0,b=e.attr(this._guid);for(var c in b)a++;return a},update:function(a,b,c){typeof a=="string"?e.updateAttribute.call(this,a,b,c||!1):typeof a=="function"&&this.each(function(b,c){e.updateAttribute.call(this,c,a)});return this}};var g={_:e,create:function(){var a=e.create(e.Module.prototype);e.addGuid(a,!0),g.mixinEvents(a);return a},extend:function(){return e.extendThis.apply(e.Module.prototype,arguments)},mixinEvents:function(a){a=a||{},e.addGuid(a);return e.extend(a,f)},on:function(){e.addEventHandler.apply(this,arguments)},subclass:function(a,b){b=b||!1,a=a||{},a.superclass=b?function(){}:e.Module;return e.createSubclass(a,!b)},version:a};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=g),exports.Stapes=g):typeof define=="function"&&define.amd?define(function(){return g}):window.Stapes=g})();(function(){"use strict";window.Caniuse=window.Caniuse||{};if(!window.console){window.console={log:function(){},info:function(){},error:function(){}}}
Caniuse.data={localUsageMap:null,supportDataByFeature:{},pageSectionIDs:{"home":!0,"index":!0,"comparison":!0,"stats_import":!0,"browserset_select":!0,"info_news":!0,"info_about":!0,"tables":!0},sortOptions:{'pubdate':'Publication date','usr_score':'Most users first','rusr_score':'Least users first','score':'Most supported first','rscore':'Least support first','alpha':'Alphabetical','ralpha':'Reverse Alphabetical'},supportLegend:{'y':'✓ Supported','n':'✗ Not supported','d':'✗ Not supported by default, but can be enabled','u':'? Support unknown','a':'~ Partial support','p':'✗ Not supported, but has polyfill available'},regionAliases:{'CD':'Congo (DRC)','CG':'Congo (Republic)','FK':'Falkland Islands','GB':'U.K.','US':'U.S.A.','VA':'Vatican City','VC':'St. Vincent'},browserNotes:{'edge':'Version number used for Edge is based on the number of EdgeHTML rather than Edge itself. This is because EdgeHTML is the engine for Edge that is related to feature support change.','ios_saf':'The Safari browser for iOS is tied to the operating system, so the numbers used are based on the OS version.','android':'Android browser/WebView version numbers through 4.4 refer to the version of Android OS. Support listed is for the Android core; it should be noted that many hardware vendors (Samsung, HTC, etc.) use altered version of their default browser which may include [more/less/buggy support](http://slides.com/html5test/the-android-browser#/).\n\nStarting in Android 5, the web engine can be updated separately, so the latest Chromium version number is used instead.','op_mini':'In most cases Opera Mini processing is done via Opera servers, which often prevents JS from working correctly.\n\nAs of version 8, the default mode of Opera Mini on iOS uses the iOS Safari engine, though *Mini mode* can be enabled.','op_mob':'On Android, Opera Mobile is currently known as "Opera Classic" for version 12.1 and simply "Opera" for later versions.'}};Caniuse.browser_capabilities={localStorage:!1};try{Caniuse.browser_capabilities.localStorage=(typeof window.localStorage==="object")}catch(e){}
Caniuse.module={};Caniuse.config={};Caniuse.Utils={getElem:function(selector,parent){return(parent||document).querySelector(selector)},getElems:function(selector,parent){return(parent||document).querySelectorAll(selector)},makeElem:function(tagName,attributes,children,listeners){var elem=tagName?document.createElement(tagName):document.createDocumentFragment();if(attributes){for(var name in attributes){elem.setAttribute(name,attributes[name])}}
if(children!==null&&children!==undefined){Caniuse.Utils.Dom.append(elem,children)}
if(listeners){for(var evt in listeners){elem.addEventListener(evt,listeners[evt],!1)}}
return elem},htmlEntities:function(str){return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')},parseText:function(str){var entitiesString=Caniuse.Utils.htmlEntities(str);var output=Caniuse.Utils.nanomarkdown.parse(entitiesString);return output},getPreviousMonthId:function(givenDate){var date=givenDate||new Date();date.setDate(1);date.setMonth(date.getMonth()-1);var prevMonthNum=date.getMonth()+1;prevMonthNum=prevMonthNum<10?'0'+prevMonthNum:prevMonthNum;return date.getFullYear()+'-'+prevMonthNum},makeIcon:function(svgSrc,fallbackSrc,width,height){if(!height){height=width}
var svgNS='http://www.w3.org/2000/svg';var xlinkNS='http://www.w3.org/1999/xlink';var svg=document.createElementNS(svgNS,'svg');svg.setAttribute('width',width);svg.setAttribute('height',height);svg.setAttribute('xmlns',svgNS);var image=document.createElementNS(svgNS,'image');image.setAttributeNS(xlinkNS,'href',svgSrc);image.setAttribute('src',fallbackSrc);image.setAttribute('width',width);image.setAttribute('height',height);svg.appendChild(image);return svg},ajax:function(url,opts){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){var completed=4;if(xhr.readyState===completed){if(xhr.status===200){opts.success(xhr.responseText,xhr)}else if(opts.error){opts.error(xhr.responseText,xhr)}else{throw new Error('Failed to XHR: '+url)}}};xhr.open(opts.method||'GET',url,!0);if(opts.method=='POST'){xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded')}
xhr.send(opts.data)},percFormat:function(val,significantDigits){significantDigits=significantDigits||2;return+(val).toFixed(significantDigits)},arraysEqual:function(arr1,arr2){if(arr1.length!==arr2.length)
return!1;for(var i=arr1.length;i--;){if(arr1[i]!==arr2[i])
return!1}
return!0},getParameters:function(str){var params={};str.replace(new RegExp("([^=&]+)(=([^&]*))?","g"),function($0,$1,$2,$3){params[$1]=decodeURIComponent($3)});return params},getIntersect:function(a,b){var ai=0,bi=0;var result=[];while(ai<a.length&&bi<b.length){if(a[ai]<b[bi]){ai++}else if(a[ai]>b[bi]){bi++}else{result.push(a[ai]);ai++;bi++}}
return result},storeItem:function(key,value){if(Caniuse.browser_capabilities&&Caniuse.browser_capabilities.localStorage){try{localStorage.setItem(key,value)}catch(e){}}},retrieveItem:function(key){if(Caniuse.browser_capabilities&&Caniuse.browser_capabilities.localStorage){try{return localStorage.getItem(key)||null}catch(e){}}
return null},getBrowserVersionTitle:function(name,version,era){var forAndroid=' for Android';if(name==='Android Browser'){if(era===0){return 'Android 5-6.x WebView: Chromium '+version}else{return 'Android '+version+' browser'}}else if(name==='iOS Safari'){return 'Safari & Chrome for iOS '+version}else if(name==='Opera Mini'){return name}else if(name==='Opera Mobile'){if(version>13){return 'Opera '+version+forAndroid}}else if(name.indexOf(forAndroid)>-1){var baseName=name.replace(forAndroid,'');return baseName+' '+version+forAndroid}else if(name==='Safari'&&version==='TP'){return 'Safari Technology Preview'}
return name+' '+version},unique:function(arr){return arr.filter(function(value,index,self){return self.indexOf(value)===index})},shuffle:function(array){var i=0,j=0,temp=null;for(i=array.length-1;i>0;i-=1){j=Math.floor(Math.random()*(i+1));temp=array[i];array[i]=array[j];array[j]=temp}},Dom:{hide:function(elem){elem.classList.add('hidden')},show:function(elem){elem.classList.remove('hidden')},toggle:function(elem,show){elem.classList[show?'remove':'add']('hidden')},toggleClass:function(elem,className,on){elem.classList[on?'add':'remove'](className)},empty:function(elem){while(elem.firstChild){elem.removeChild(elem.firstChild)}},remove:function(elem){if(Array.isArray(elem)){var arr=elem;for(var i=0;i<arr.length;i++){Caniuse.Utils.Dom.remove(arr[i])}}else if(elem.parentNode){elem.parentNode.removeChild(elem)}},append:function(elem,children){if(typeof children==='object'){var childCount=children.length;for(var i=0;i<childCount;i++){var child=children[i];if(typeof child==="string"){elem.appendChild(document.createTextNode(child))}else{elem.appendChild(child)}}}else{elem.appendChild(document.createTextNode(children))}},prepend:function(target,elem){target.insertBefore(elem,target.firstChild)},insertAfter:function(newElem,refElem){refElem.parentNode.insertBefore(newElem,refElem.nextSibling)},listen:function(elem,eventName,func,context){if(context){func=func.bind(context)}
elem.addEventListener(eventName,func,!1)}}};Caniuse.mediator=(function(){var debug=!1;var subscribe=function(channel,fn,context){var mediator=Caniuse.mediator;if(!mediator.channels[channel]){mediator.channels[channel]=[]}
mediator.channels[channel].push({context:(context||this),callback:fn});return this};var publish=function(channel){var mediator=Caniuse.mediator;if(!mediator.channels[channel]){return!1}
var args=Array.prototype.slice.call(arguments,1);for(var i=0,l=mediator.channels[channel].length;i<l;i++){var subscription=mediator.channels[channel][i];if(debug){}
subscription.callback.apply(subscription.context,args)}
return this};return{channels:{},publish:publish,subscribe:subscribe,installTo:function(obj){obj.subscribe=subscribe;obj.publish=publish}}}());(function settingsManagement(Caniuse){Caniuse.configVal={ALL:{value:"all"},NOT_APPLICABLE:{value:"not applicable"}};Caniuse.configType={STORED:1,TEMP:2};Caniuse.configValType={LIST:1,STRING:2,BOOLEAN:3,NUMBER:4};Caniuse.changeType={URL:1,UI:2};var CONFIG_VAL_ALL=Caniuse.configVal.ALL;var CONFIG_VAL_NA=Caniuse.configVal.NOT_APPLICABLE;var CONFIG_TYPE_STORED=Caniuse.configType.STORED;var CONFIG_TYPE_TEMP=Caniuse.configType.TEMP;var valType=Caniuse.configValType;Caniuse.config={"feat":new Setting("feat",CONFIG_TYPE_TEMP,[],valType.LIST),"search":new Setting("search",CONFIG_TYPE_TEMP,"",valType.STRING),"cats":new Setting("cats",CONFIG_TYPE_TEMP,CONFIG_VAL_ALL,valType.LIST),"statuses":new Setting("statuses",CONFIG_TYPE_TEMP,["rec","pr","cr","wd","ls","other"],valType.LIST),"feature_sort":new Setting("feature_sort",CONFIG_TYPE_TEMP,"pubdate",valType.STRING),"compare":new Setting("compare",CONFIG_TYPE_TEMP,[],valType.LIST),"compare_cats":new Setting("compare_cats",CONFIG_TYPE_TEMP,CONFIG_VAL_ALL,valType.LIST),"primary_browserset":new Setting("primary_browserset",CONFIG_TYPE_STORED,'',valType.STRING),"include_current":new Setting("include_current",CONFIG_TYPE_STORED,!0,valType.BOOLEAN),"agents":new Setting("agents",CONFIG_TYPE_STORED,["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","and_uc","samsung"],valType.LIST),"force_include_mobile":new Setting("force_include_mobile",CONFIG_TYPE_STORED,!0,valType.BOOLEAN),"use_imported_data":new Setting("use_imported_data",CONFIG_TYPE_STORED,!0,valType.BOOLEAN),"usage_threshold":new Setting("usage_threshold",CONFIG_TYPE_STORED,0.5,valType.NUMBER),"primary_usage":new Setting("primary_usage",CONFIG_TYPE_STORED,"region.global",valType.STRING),"show_conclusions":new Setting("show_conclusions",CONFIG_TYPE_STORED,!1,valType.BOOLEAN),"accessible_colors":new Setting("accessible_colors",CONFIG_TYPE_STORED,!1,valType.BOOLEAN),"show_full_prefix":new Setting("show_full_prefix",CONFIG_TYPE_STORED,!1,valType.BOOLEAN)};function Setting(id,type,defaultValue,valueType){var retrieveItem=function(key){return Caniuse.Utils.retrieveItem("config-"+key)};var storeItem=function(key,value){Caniuse.Utils.storeItem("config-"+key,value)};var _this=this;this._stringToValue=function(str){var newVal=null;switch(this.valueType){case valType.LIST:newVal=str.split(",");break;case valType.BOOLEAN:newVal=str==="1"?!0:!1;break;case valType.NUMBER:newVal=+str;break;case valType.STRING:newVal=str;break}
var result=this._validate(newVal);if(result===undefined){return result}
return newVal};this._validate=function(val){var i;var findFeatAlias=function(id){var featureMap=Caniuse.data.supportDataByFeature;for(var featId in featureMap){var keywords=featureMap[featId].keywords.split(',');var aliasIndex=keywords.indexOf('#'+id);if(aliasIndex>-1){return featId}}
return null};switch(this.valueType){case valType.LIST:if(this.valuesForAll){for(i=0;i<val.length;i++){var item=val[i];if(this.valuesForAll.indexOf(item)===-1){val.splice(i,1);i--}}}else if(this.id==='feat'){var featureMap=Caniuse.data.supportDataByFeature;var featAliasId;var badId=null;for(i=0;i<val.length;i++){var featId=val[i];if(!featureMap[featId]){featAliasId=findFeatAlias(featId);if(featAliasId){val[i]=featAliasId}else{badId=featId;val.splice(i,1);i--}}}
if(badId&&!val.length){Caniuse.config.feat.setValueToDefault();Caniuse.config.search.setValueFromURL(badId);return undefined}else if(featAliasId){this.setValueFromUI(val)}}else if(this.id==='compare'){var browserData=Caniuse.data.browsers;for(i=0;i<val.length;i++){var browserPair=val[i];var parts=browserPair.split('+');if(parts.length!==2){val[i]=null;continue}
var browserId=parts[0];var version=parts[1];if(!(browserId in browserData)){val[i]=null;continue}
var versionData=browserData[browserId];var dataByVersion=versionData.dataByVersion;if(!(version in dataByVersion)){val[i]=browserId+'+'+versionData.current_version}}}
break;case valType.NUMBER:if(isNaN(val)){val=this.defaultValue}
break}
return!0};(function construct(){_this.id=id;_this.type=type;_this.defaultValue=defaultValue;_this.valueType=valueType;_this.isAll=(defaultValue==CONFIG_VAL_ALL);_this.valuesForAll=null;_this._element=null;var storedValue=retrieveItem(_this.id);if(storedValue!==null){_this.value=_this._stringToValue(storedValue)}else{_this.value=defaultValue}}());if(id==="usage_threshold"){var max_usage=50;var getNiceNumber=function(val){if(val>10){return Math.round(val)}
var place=(''+Math.round(val*100)).length;var placeN=Math.pow(10,place)/100;var niceNums=[0.1,0.125,0.15,0.175,0.2,0.25,0.3,0.4,0.5,0.6,0.7,0.75,0.8,0.9,1];var memoDiff=Infinity;var outputNum;for(var i=0;i<niceNums.length;i++){var niceNum=niceNums[i]*placeN;var diff=Math.abs(niceNum-val);if(diff<memoDiff){outputNum=niceNum;memoDiff=diff}}
return outputNum};Setting.prototype.setValueFromSlider=function(sliderValue){sliderValue=+sliderValue;var val=Math.pow(sliderValue,2.5)/300;var output=val*max_usage;var niceOutput=getNiceNumber(output);var realValue=+(niceOutput).toFixed(2);this.setValue(realValue,Caniuse.changeType.UI)};Setting.prototype.getValueForSlider=function(){var x=this.value/max_usage;return Math.pow(300*x,1/2.5)}}
Setting.prototype._getValueAsString=function(){var value=this.value;var strVal;switch(this.valueType){case valType.LIST:strVal=value.join(",");break;case valType.BOOLEAN:strVal=value?"1":"0";break;case valType.NUMBER:strVal=value+"";break;case valType.STRING:strVal=value;break}
return strVal};Setting.prototype.matchesValue=function(givenValue){switch(this.valueType){case valType.LIST:return Caniuse.Utils.arraysEqual(this.value,givenValue);default:return(this.value==givenValue)}};Setting.prototype.matchesDefault=function(){return this.matchesValue(this.defaultValue)};Setting.prototype.matchesAll=function(){if(this.valueType!==valType.LIST){return!1}
if(this.valuesForAll===null||this.valuesForAll===undefined){return!1}
return Caniuse.Utils.arraysEqual(this.value,this.valuesForAll)};Setting.prototype.getAsURLParameter=function(){var id=this.id;if(this.value===CONFIG_VAL_NA||this.type===CONFIG_TYPE_STORED||this.matchesDefault()){return null}else if(this.value==CONFIG_VAL_ALL&&this.matchesAll()){return id+'=all'}else{var urlVal=encodeURIComponent(this._getValueAsString());urlVal=urlVal.replace(/%2C/g,',');urlVal=urlVal.replace(/%2B/g,'+');return id+'='+urlVal}};Setting.prototype.initCheckboxByClass=function(container){var elem=container.querySelector('.'+this.id);if(!elem){throw new Error("No element found with class "+this.id)}
this.initCheckbox(elem)};Setting.prototype.initCheckbox=function(checkboxElement){var _this=this;checkboxElement.addEventListener("change",function(){_this.setValue(this.checked,Caniuse.changeType.UI)},!1)};Setting.prototype.setValuesForAll=function(values){this.valuesForAll=values;if(this.defaultValue==CONFIG_VAL_ALL){this.defaultValue=values}
if(this.value==CONFIG_VAL_ALL){this.value=values}};Setting.prototype.setInitialValue=function(newValue){this.value=newValue;Caniuse.mediator.publish("configInitialized",{"option":this.id,"values":this.value})};Setting.prototype.setValue=function(newValue,changeSource){if(!this.matchesValue(newValue)){this.value=newValue;Caniuse.mediator.publish("configChanged",{"option":this.id,"values":this.value,"changeSource":changeSource});if(this.type===CONFIG_TYPE_STORED){var valueAsString=this._getValueAsString();storeItem(this.id,valueAsString)}else if(changeSource!==Caniuse.changeType.URL){updateLocation()}}};Setting.prototype.setValueFromUI=function(value){this.setValue(value,Caniuse.changeType.UI)};Setting.prototype.setValueFromURL=function(str){var newVal;if(str===null){newVal=Caniuse.configVal.NOT_APPLICABLE}else{str=str.replace(/JS_API/g,"JS API");newVal=this._stringToValue(str);if(newVal===undefined){console.log('invalid value in string: '+str);return}}
this.setValue(newVal,Caniuse.changeType.URL)};Setting.prototype.setValueToDefault=function(noLocationChange){if(this.value===CONFIG_VAL_NA){this.value=this.defaultValue}else{this.setValue(this.defaultValue,Caniuse.changeType.URL)}
if(!noLocationChange){updateLocation()}};Setting.prototype.reset=function(){this.value=this.defaultValue};if(type===CONFIG_TYPE_STORED){Setting.prototype.store=function(){if(Caniuse.browser_capabilities.localStorage===!0){}};Setting.prototype.restore=function(){if(Caniuse.browser_capabilities.localStorage===!0){}}}}
function updateLocation(){var newHash='';var config=Caniuse.config;var parts=[];for(var key in config){var setting=config[key];var urlParam=setting.getAsURLParameter();if(urlParam){parts.push(urlParam)}}
newHash=parts.join('&');Caniuse.mediator.publish("hashChangeRequest",newHash,{blockEffect:!0})}
Caniuse.updateLocation=updateLocation;Caniuse.resetSettings=function(settingIds){for(var i=0;i<settingIds.length;i++){var id=settingIds[i];Caniuse.config[id].setValueToDefault(!0)}};Caniuse.mediator.subscribe("pageSectionDisplayed",function(sectionId){});Caniuse.Setting=Setting}(Caniuse));(function browserSetManager(Caniuse){var currentSet=null;var STORAGE_KEY='browserSets';var tempKeyName='(from URL)';var mediator=Caniuse.mediator;Caniuse.TEMP_KEY_NAME=tempKeyName;var tempSet;var lazyLoadBrowsersList;var BrowserSet=Stapes.subclass({constructor:function(browserSetData){this.isTemp=!!browserSetData.isTemp;this.name=this.isTemp?'(temp)':browserSetData.name;this.rules=browserSetData.rules;this.arr=null;var usageDataPromises=[];this.rules.forEach(function(rule){var matches=rule.match(/^>=\s*(\d*\.?\d+)%\s+in\s+((alt-)?\w\w)$/i);if(matches){var regionId=matches[2];var promise=Caniuse.requestRegionData({regionId:regionId});usageDataPromises.push(promise)}}.bind(this));this.usageDataReady=Promise.all(usageDataPromises)},fetchArray:function(){var getArr=function(){try{this.arr=Caniuse.browserslist(this.rules)}catch(e){alert(e.message)}
mediator.publish('browserSetReady',this);return this.arr}.bind(this);return Promise.all([Caniuse.loadBrowsersList(),this.usageDataReady]).then(getArr)}});var sets=Caniuse.Utils.retrieveItem(STORAGE_KEY);if(sets){sets=JSON.parse(sets);Caniuse.browserSets=sets}else{Caniuse.browserSets=[]}
function findTempSet(){if(!location.search.length){return}
var params=Caniuse.Utils.getParameters(location.search.substr(1));if(!params.browserset){return}
Caniuse.loadBrowsersList().then(function(){try{var rules=params.browserset.split(',');var result=Caniuse.browserslist(rules);tempSet=new BrowserSet({name:tempKeyName,rules:rules,arr:result});Caniuse.browserSets.push(tempSet);mediator.publish("browserSetsChanged");Caniuse.config.primary_browserset.setValue(tempKeyName)}catch(e){alert('Invalid browserset given');return}})}
function removeSet(setNameToDelete){Caniuse.browserSets=Caniuse.browserSets.filter(function(browserSetData){return browserSetData.name!==setNameToDelete})}
function updateCustomUsage(){var allUsage=Caniuse.data.localUsageMap;var customUsageId;var dataById={};for(var id in allUsage){var usageData=allUsage[id];if(usageData.type==='custom'){dataById[id]=usageData}}
var keys=Object.keys(dataById);var primaryUsageId=Caniuse.config.primary_usage.value;if(primaryUsageId in dataById){customUsageId=primaryUsageId}else if(keys.length>0){customUsageId=keys[0]}
if(customUsageId){var usageData=Caniuse.data.localUsageMap[customUsageId];if(Caniuse.browserslist){Caniuse.browserslist.setCustomUsage(usageData)}else{Caniuse.loadBrowsersList().then(function(){Caniuse.browserslist.setCustomUsage(usageData)})}}}
Caniuse.loadBrowsersList=function(){lazyLoadBrowsersList=lazyLoadBrowsersList||new Promise(function(resolve,reject){yepnope.injectJs("js/browserslist.module.js",function(){if(!Caniuse.browserslist){reject('no browserslist!')}else{updateCustomUsage();resolve()}})});return lazyLoadBrowsersList};Caniuse.getBrowserSet=function(name,andFetch){var curSetName=name||Caniuse.config.primary_browserset.value;var curSetData=Caniuse.browserSets.filter(function(browserSetData){return browserSetData.name===curSetName})[0];if(!curSetData){return null}
currentSet=new BrowserSet(curSetData);if(andFetch){currentSet.fetchArray()}
return currentSet};Caniuse.saveBrowserSets=function(allSets){Caniuse.browserSets=allSets;removeSet(tempKeyName);Caniuse.Utils.storeItem(STORAGE_KEY,JSON.stringify(Caniuse.browserSets))};mediator.subscribe("browserSetsChanged",function(){Caniuse.getBrowserSet(null,!0)});mediator.subscribe("supportDataReady",function(){findTempSet();Caniuse.getBrowserSet(null,!0)});mediator.subscribe("deleteBrowserSetRequest",function(setNameToDelete){removeSet(setNameToDelete);Caniuse.saveBrowserSets(Caniuse.browserSets);var first=Caniuse.browserSets[0];var val=first?first.name:'';mediator.publish('browserSetsChanged');Caniuse.config.primary_browserset.setValue(val)});function addUsage(usageData){if(usageData.type!=='region'){return}
Caniuse.loadBrowsersList().then(function(){var regionId=usageData.id;var usageByBrowserVer={};for(var browserId in usageData.dataByBrowser){var versionData=usageData.dataByBrowser[browserId];for(var versionId in versionData){usageByBrowserVer[browserId+' '+versionId]=versionData[versionId]}}
Caniuse.browserslist.usage[regionId]=usageByBrowserVer})}
mediator.subscribe("usageDataReceived",function(data){addUsage(data.usageData)});mediator.subscribe("usageDataFound",function(usageData){addUsage(usageData)});mediator.subscribe("configChanged",function(data){if(data.option==='primary_usage'){updateCustomUsage()}})}(Caniuse));(function usageManager(Caniuse){var makeElem=Caniuse.Utils.makeElem;var getElem=Caniuse.Utils.getElem;var Dom=Caniuse.Utils.Dom;var suggestCountryStorageId='suggestCountry';var UsageData=function(params){var data={name:params.name,id:params.id,type:params.type,source:params.source,dataByBrowser:params.dataByBrowser,meta:params.meta,uid:params.type+'.'+params.id};if(params.type==='region'){var shortName=Caniuse.data.regionAliases[params.id];if(shortName){data.shortName=shortName}}
return data};Caniuse.UsageData=UsageData;var USAGE_DATA="usage-data-by-id";var localUsageMap;var promiseMap={};var requestRegionData=function(args){var regionId=args.regionId;var updateOnly=!!args.updateOnly;var usageId='region.'+regionId;if(usageId in localUsageMap){var data=localUsageMap[usageId];Caniuse.mediator.publish("usageDataReceived",{usageData:data,updateOnly:updateOnly,initialRequest:!1});return Promise.resolve(data)}else if(promiseMap[usageId]){return promiseMap[usageId]}else{promiseMap[usageId]=new Promise(function(resolve,reject){Caniuse.Utils.ajax('/process/request_region_data.php?id='+regionId,{success:function(dataStr){var data;try{data=JSON.parse(dataStr)}catch(e){data=null}
if(!data){reject('usageDataRequestFailed: '+regionId);Caniuse.mediator.publish("usageDataRequestFailed",regionId);return}
data.name=data.name;data.type='region';data.source='statcounter';data.dataByBrowser=data.data;data.meta={access_date:data.access_date,month:data.month};var usageData=new UsageData(data);var output={usageData:usageData,updateOnly:updateOnly,initialRequest:!0};resolve(usageData);Caniuse.mediator.publish("usageDataReceived",output)},error:function(){reject('usageDataRequestFailed: '+regionId);Caniuse.mediator.publish("usageDataRequestFailed",regionId)}})});return promiseMap[usageId]}}
Caniuse.requestRegionData=requestRegionData;Caniuse.mediator.subscribe("requestRegionData",requestRegionData);Caniuse.mediator.subscribe("usageDataReceived",handleUsageDataReceived);Caniuse.mediator.subscribe("usageDataRequestFailed",function(regionId){console.error('failed to get region data for: '+regionId);window.alert('Sorry, no data currently available for this region')});Caniuse.mediator.subscribe("deleteUsageRequest",removeUsage);function handleUsageDataReceived(args){var usageData=args.usageData;var usageId=usageData.uid;localUsageMap[usageId]=usageData;Caniuse.Utils.storeItem(USAGE_DATA,JSON.stringify(localUsageMap))}
function removeUsage(usageId){delete localUsageMap[usageId];delete promiseMap[usageId];Caniuse.Utils.storeItem(USAGE_DATA,JSON.stringify(localUsageMap));Caniuse.config.primary_usage.setValueToDefault()}
function validateUsageData(usageMap,id){var data=usageMap[id];if(data.source=='statcounter'){var usageMonth=data.meta.month;var lastDate=Caniuse.rawData.last_region_date;if(lastDate!=data.meta.access_date){console.log('Requesting new usage due to date change:',lastDate,data.meta.access_date);delete usageMap[id];Caniuse.Utils.storeItem(USAGE_DATA,JSON.stringify(usageMap));Caniuse.mediator.subscribe("regionOptionSetReady",function(usageId){Caniuse.mediator.publish("requestUsageUpdate",id)});return!1}}
return!0}
function showCountrySuggestion(countryId,name){var importClicked=!1;var messageText='Detected your country as "'+name+'". Would you like to import usage data for that country?';var importButton=makeElem('button',{'class':'ciu-button  region-detected-button'},'Import',{click:function(evt){evt.preventDefault();Caniuse.mediator.publish("requestRegionData",{regionId:countryId});importClicked=!0;Dom.empty(countryMessage);Dom.append(countryMessage,['Importing data for '+name+'...',makeElem('div',{'class':'progress-bar'})])}});var noButton=makeElem('button',{'class':'ciu-button  region-detected-button'},'No thanks',{click:function(evt){evt.preventDefault();Dom.remove(countryMessage);Caniuse.Utils.storeItem(suggestCountryStorageId,'0')}});var buttonWrap=makeElem('div',{'class':'region-button-wrap'},[importButton,noButton]);var countryMessage=makeElem('aside',{'class':'country-message'},[messageText,buttonWrap]);getElem('.ciu-page-header').appendChild(countryMessage);Caniuse.mediator.subscribe("usageDataReceived",function(args){var usageData=args.usageData;var usageId=usageData.uid;if(usageId==='region.'+countryId){Dom.remove(countryMessage);importClicked=!1}})}
function runIpScript(){var regionalDataFound=!1;for(var id in localUsageMap){if(id=='region.global'){continue}
if(id.indexOf('region.')===0){regionalDataFound=!0}}
if(!regionalDataFound){var suggestCountry=Caniuse.Utils.retrieveItem(suggestCountryStorageId);if(suggestCountry!=='0'){var script=document.createElement('script');script.src='//ipinfo.io/?callback=getIpData';Caniuse.Utils.getElem('head').appendChild(script)}}}
window.getIpData=function(data){Caniuse.data.ipData=data;Caniuse.mediator.publish("ipDataReceived",data)};Caniuse.mediator.subscribe("ipDataReceived",function(ipData){var countryId=ipData.country;if(countryId&&countryId.match(/^[a-z]{2}$/i)){Caniuse.Utils.ajax('/process/get_country_name.php?id='+countryId,{success:function(data){var output=JSON.parse(data);if(output&&output.id&&output.name){var name=Caniuse.data.regionAliases[output.id]||output.name;showCountrySuggestion(output.id,name)}else{console.error('Failed to get data from ')}},error:function(){}})}});function init(){var localJSON=Caniuse.Utils.retrieveItem(USAGE_DATA);localUsageMap=localJSON?JSON.parse(localJSON):{};Caniuse.data.localUsageMap=localUsageMap;runIpScript();for(var usageId in localUsageMap){var data=localUsageMap[usageId];var ok=validateUsageData(localUsageMap,usageId);if(ok){Caniuse.mediator.publish("usageDataFound",data)}}}
Caniuse.module.usageManager={init:init}}(Caniuse));(function(Caniuse){var modeManager={SEARCH:1,FEATURES:2,COMPARISON:3,ALL:4};var _currentMode=modeManager.ALL;modeManager.setMode=function(newMode){if(newMode!==_currentMode){_currentMode=newMode;Caniuse.mediator.publish("modeChanged",newMode)}};modeManager.getMode=function(){return _currentMode};Caniuse.modeManager=modeManager}(Caniuse));(function dataManagement(Caniuse){var _supportData,_eras,_agents,_statuses,_cats,_supportedFeatures,browsersByType;function makeBrowserSubData(){browsersByType={};for(var agentId in _agents){var agent=_agents[agentId];var type=agent.type;var dataByVersion=agent.dataByVersion={};var versionList=agent.version_list;var subGroup=browsersByType[type]||{};browsersByType[type]=subGroup;subGroup[agentId]=agent;for(var i=0;i<versionList.length;i++){var item=versionList[i];dataByVersion[item.version]=item}}}
var processSupportData=function processSupportData(data){_supportData=data.data;_eras=data.eras;_agents=data.agents;_cats=data.cats;_statuses=data.statuses;Caniuse.data.lastRegionDate=data.last_region_date;var globalUsage={};var i;var categoryBySubCat={};var formatPercent=function(val){return+(val).toFixed(2)};for(var cat in _cats){var subcats=_cats[cat];for(i=0;i<subcats.length;i++){var subcat=subcats[i];categoryBySubCat[subcat]=cat}}
for(var agentId in _agents){var agent=_agents[agentId];if(!globalUsage[agentId]){globalUsage[agentId]={}}
var versionList=agent.version_list;for(i=0;i<versionList.length;i++){var item=versionList[i];if(!item.prefix){item.prefix=agent.prefix}
var versionId=item.version;var usage=item.global_usage;globalUsage[agentId][versionId]=usage}}
for(var featId in _supportData){var feat=_supportData[featId];feat.statusLabel=_statuses[feat.status];feat.searchableContent=[feat.title,feat.description,featId,feat.keywords].join(" ").toLowerCase();feat.searchableContent=feat.searchableContent.replace(/:\s+/g,':');feat.pubDate=new Date(feat.date_published);var featParent=feat.parent;if(featParent&&_supportData[featParent]){var children=_supportData[featParent].children;if(!children){children=_supportData[featParent].children=[]}
children.push(featId)}
feat.baseCategories=[];for(i=0;i<feat.categories.length;i++){var category=feat.categories[i];var baseCat=categoryBySubCat[category];if(feat.baseCategories.indexOf(baseCat)===-1){feat.baseCategories.push(baseCat)}}}
Caniuse.data.supportDataByFeature=_supportData;Caniuse.data.browsers=_agents;makeBrowserSubData();var globalUsageData=new Caniuse.UsageData({name:'Global',id:'global',type:'region',source:'statcounter',dataByBrowser:globalUsage,meta:''});var ecmaFeatures=data.ecmascript;var commonSearchFeatures=data.common_searches;for(i=0;i<commonSearchFeatures.length;i++){var commonFeat=commonSearchFeatures[i];commonFeat.searchableContent=[commonFeat.title,commonFeat.keywords].join(" ").toLowerCase();if(commonFeat.list){if(commonFeat.type.indexOf('html-element')>-1){commonFeat.searchableContent+='<'+commonFeat.list.join('>,<')+'>'}else{commonFeat.searchableContent+=' '+commonFeat.list.join(' ').toLowerCase()}}}
var processedData={rawSupport:_supportData,browsers:_agents,browsersByType:browsersByType,categories:_cats,statuses:_statuses,globalUsage:globalUsageData,ecmaFeatures:ecmaFeatures,commonSearchFeatures:commonSearchFeatures};Caniuse.mediator.publish("supportDataReady",processedData)};var init=function init(){if(!Caniuse.rawData){throw new Error('No raw data found')}
processSupportData(Caniuse.rawData);Caniuse.modeManager.setMode(Caniuse.modeManager.ALL)};Caniuse.module.dataManagement={init:init}}(Caniuse));(function domManager(Caniuse){var Dom=Caniuse.Utils.Dom;var getElem=Caniuse.Utils.getElem;var makeElem=Caniuse.Utils.makeElem;var getElems=Caniuse.Utils.getElems;var tableContent=getElem('.js-feature-list-wrap');var optionsContainer=getElem(".js-primary-options");var tablesContainer=getElem("#tables");var STR_SHOW_OPTIONS='Settings';var COLLAPSE_WIDTH=555;var MOBILE_WIDTH=400;var isExtraNarrow=!1;var optionsShown=!1;var optionToggleButton;var i;function handleResize(){var width=window.innerWidth||document.documentElement.clientWidth;Caniuse.mediator.publish('widthChanged',width)}
function positionSiteWidgets(){Dom.prepend(getElem('.ciu-page-header'),getElem('.ciu-site-widgets'))}
function setupSearch(){var searchInputEl=getElem('.js-search input');var searchResultsEl=getElem('.js-search-result-info');Caniuse.mediator.publish("searchInputReady",searchInputEl,searchResultsEl)}
function getBrowserScores(browsers,featuresById,browsersById){var scoresByBrowser={};var featCount;for(var i=0;i<browsers.length;i++){var browserId=browsers[i];var browser=browsersById[browserId];var curVersion=browser.currentVersion;var verArray=browser.versionArray;var latestVersion=verArray[verArray.length-1].id;var scores={currentFull:0,currentPartial:0,latestFull:0,latestPartial:0};featCount=0;for(var featId in featuresById){var featData=featuresById[featId];if(featData.sourceData.status==='unoff'){continue}
featCount++;var supportData=featData.supportDataByBrowser[browserId];var curValue=supportData[curVersion].supportValue;var latestValue=supportData[latestVersion].supportValue;scores.currentFull+=curValue.hasFullSupport?1:0;scores.currentPartial+=curValue.hasPartialSupport?1:0;scores.latestFull+=latestValue.hasFullSupport?1:0;scores.latestPartial+=latestValue.hasPartialSupport?1:0}
scoresByBrowser[browserId]={id:browserId,scores:scores,name:browser.name,curVersion:curVersion,latestVersion:latestVersion}}
return{scoresByBrowser:scoresByBrowser,featCount:featCount}}
function setupBrowserScores(featureData){var browsers=['chrome','firefox','edge','safari'];var featuresById=featureData.featuresById;var browsersById=featureData.browserListModel.browsersById;var parent=getElem('.js-browser-scores');var browserScores=getBrowserScores(browsers,featuresById,browsersById);var scoresByBrowser=browserScores.scoresByBrowser;var featCount=browserScores.featCount;var buttons=getElems('.js-toggle-score');var barByBrowser={};var currentButton='current';var setBarType=function(type){browsers.forEach(function(browserId){var scoreData=scoresByBrowser[browserId];var name=scoreData.name;var bar=barByBrowser[browserId];var fullEl=bar.firstChild;var partialEl=bar.lastChild;var scoreFull;var scorePartial;var version;if(type==='current'){version=scoreData.curVersion;scoreFull=scoreData.scores.currentFull;scorePartial=scoreData.scores.currentPartial}else if(type==='latest'){version=scoreData.latestVersion;scoreFull=scoreData.scores.latestFull;scorePartial=scoreData.scores.latestPartial}
var fullPerc=(scoreFull/featCount)*100;var partialPerc=(scorePartial/featCount)*100;var formattedPerc=+fullPerc.toFixed(1);fullEl.style.width=fullPerc+'%';fullEl.title='Full support: '+scoreFull+'pts';partialEl.style.width=partialPerc+'%';partialEl.title='Partial support: '+scorePartial+'pts';fullEl.innerText=scoreData.name+' '+version+': '+scoreFull})};var handleButtonClick=function(evt){var curButton=evt.target;var type=curButton.getAttribute('data-score');for(var i=0;i<buttons.length;i++){if(buttons[i]===curButton){buttons[i].classList.add('is-selected')}else{buttons[i].classList.remove('is-selected')}}
setBarType(type)};for(var i=0;i<buttons.length;i++){Dom.listen(buttons[i],'click',handleButtonClick)}
browsers.sort(function(a,b){var scoreA=browserScores.scoresByBrowser[a].scores;var scoreB=browserScores.scoresByBrowser[b].scores;var result=(scoreA.currentFull+scoreA.currentPartial)<(scoreB.currentFull+scoreB.currentPartial)?1:-1;return result});browsers.forEach(function(browserId){var el=makeElem('li',{'class':'home__list-item'},[makeElem('span',{'class':'home__browser-bar  home__browser-bar--full  browser-bg--'+browserId}),makeElem('span',{'class':'home__browser-bar  home__browser-bar--partial  browser-bg--'+browserId})]);barByBrowser[browserId]=el;parent.appendChild(el)});setBarType(currentButton)}
function setupBrowserScoreNote(){var note=getElem('.js-score-notes');var show=!1;Dom.listen(getElem('.js-score-notes-btn'),'click',function(){show=!show;Dom.toggle(note,show)});Dom.listen(getElem('.js-score-notes-close-btn'),'click',function(){show=!1;Dom.toggle(note,show)})}
function setupLatestFeatures(featureData){var featuresById=featureData.featuresById;var parent=getElem('.js-latest-features');var featureIds=Object.keys(featuresById);featureIds.sort(function(a,b){return featuresById[a].sourceData.pubDate<featuresById[b].sourceData.pubDate?1:-1});var featuresByDateArr=[];var lastDate;for(var i=0;i<featureIds.length;i++){var feat=featuresById[featureIds[i]];if(i<5){var el=makeElem('li',{'class':'home__list-item'},[makeElem('a',{href:'#feat='+feat.id},feat.title)]);parent.appendChild(el)}}}
var dykArr;var dykIndex=-1;function setupDidYouKnow(){var list=getElem('.js-dyk-list');var items=getElems('li',list);dykArr=Array.prototype.slice.call(items);Caniuse.Utils.shuffle(dykArr);showNextDYK();Dom.listen(getElem('.js-next-dyk'),'click',showNextDYK)}
function showNextDYK(){dykIndex++;if(dykIndex>=dykArr.length){dykIndex=0}
dykArr.forEach(function(item,index){if(index===dykIndex){Dom.show(item)}else{Dom.hide(item)}})}
function setupSecondaryContent(){}
function setupHome(){setupMostSearched();setupDidYouKnow();Caniuse.mediator.subscribe("featureListReady",function(featureListView){setupLatestFeatures(featureListView.model);setupBrowserScores(featureListView.model);setupBrowserScoreNote();setupSecondaryContent()})}
function setupMostSearched(){var links=getElems('.js-most-searched a');for(var i=0;i<links.length;i++){var link=links[i];link.href='/#feat='+link.getAttribute('href')}}
function setupLinks(){Caniuse.mediator.subscribe("domReady",function(){Dom.listen(getElem('.js-section-index'),'click',function(evt){var target=evt.target;if(target.tagName=='A'){evt.preventDefault();var linkHref=target.getAttribute('href');if(linkHref.indexOf('=')===-1){var newLocation='feat='+linkHref;Caniuse.mediator.publish('hashChangeRequest',newLocation)}else{var hash=target.hash.substr(1);hash=hash.replace('JS_API','JS API');Caniuse.mediator.publish("hashChangeRequest",hash)}}});Dom.listen(document.body,'click',function(evt){var target=evt.target;if(target.tagName=='A'){var href=target.href;var linkHref=target.getAttribute('href');var matches=linkHref.match(/(#feat=[a-z-]+)$/);if(href.indexOf(location.origin)===0&&matches&&matches.length>1){evt.preventDefault();var newLocation=matches[1];Caniuse.mediator.publish('locationChange',newLocation.substr(1))}}})});var timeout,pointerEventsDisabled;window.addEventListener('scroll',function(){clearTimeout(timeout);if(!pointerEventsDisabled){document.body.classList.add('no-pointer-events');pointerEventsDisabled=!0}
timeout=setTimeout(function(){document.body.classList.remove('no-pointer-events');pointerEventsDisabled=!1},500)})}
function toggleAccessibleColors(enableColors){var className='accessible-colors';var classList=document.body.classList;if(enableColors){classList.add(className)}else{classList.remove(className)}}
function toggleFullPrefixClass(show){var className='show-full-prefix';var classList=document.body.classList;if(show){classList.add(className)}else{classList.remove(className)}}
function handleConfigChange(data){if(data.option=='accessible_colors'){toggleAccessibleColors(data.values)}else if(data.option=='show_full_prefix'){toggleFullPrefixClass(data.values)}}
function handleButtonPositioning(width){var legend=getElem('.ciu-legend');var button=getElem('.options-toggle');var listWrap=getElem('.js-feature-list-wrap');if(!button){return}
if(width<=400){Dom.insertAfter(button,legend)}else{Dom.insertAfter(button,listWrap)}}
function handleWidthChange(newWidth){}
function setupJSSupport(){document.body.parentNode.classList.remove('no-js')}
function setupUrl(){if(history.pushState&&location.search.indexOf('code=')>-1||location.search.indexOf('logout=')>-1){history.pushState({},"Home","/")}}
Caniuse.mediator.subscribe('configInitialized',function(){var value=Caniuse.config.accessible_colors.value;toggleAccessibleColors(value);var showPrefixValue=Caniuse.config.show_full_prefix.value;toggleFullPrefixClass(showPrefixValue)});Caniuse.mediator.subscribe('configChanged',handleConfigChange);Caniuse.mediator.subscribe('widthChanged',handleWidthChange);setupDefaultBrowsers();function init(){setupJSSupport();setupUrl();setupLinks();setupSearch();setupHome();Dom.listen(window,'resize',handleResize);handleResize();Caniuse.mediator.subscribe("optionsReady",addOptions);Caniuse.mediator.subscribe("featureListReady",featureListReady);Caniuse.mediator.subscribe("optionTagsReady",optionTagsReady);Caniuse.mediator.publish("domReady",null);setTimeout(function(){Caniuse.mediator.publish("secondaryInit",null)},1000)}
function setupDefaultBrowsers(){var regionBrowsers={'CN':['and_uc','and_qq'],'as':['and_uc','and_qq']};var addBrowsers=function(usageData){if(usageData.type!=='region'){return}
var agentsSetting=Caniuse.config.agents;var agentsArr=agentsSetting.value.slice();var browsers=regionBrowsers[usageData.id];if(browsers){for(var i=0;i<browsers.length;i++){var browser=browsers[i];if(agentsArr.indexOf(browser)===-1){agentsArr.push(browser)}}
agentsSetting.setValue(agentsArr)}}
Caniuse.mediator.subscribe("usageDataFound",function(data){addBrowsers(data)});Caniuse.mediator.subscribe("usageDataReceived",function(data){addBrowsers(data.usageData)})}
function toggleOptions(show,isInitial){var withOptionsClass='feature-list-wrap--with-options';if(show!==null&&show!==undefined){optionsShown=show}else{optionsShown=!optionsShown}
if(optionsShown){Dom.show(optionsContainer);tableContent.classList.add(withOptionsClass)}else{Dom.hide(optionsContainer);tableContent.classList.remove(withOptionsClass)}
Caniuse.mediator.publish('optionsToggled',optionsShown,isInitial)}
function addSidebarToggle(){optionToggleButton=getElem('.js-options-toggle');Dom.listen(optionToggleButton,'click',function(){toggleOptions()});Dom.listen(document.body,'click',function(evt){if(evt.target.classList.contains('js-show-settings')){toggleOptions(!0)}});getElem('.js-search').appendChild(optionToggleButton)}
function addOptions(optionSections){for(var i=0;i<optionSections.length;i++){var container=document.createElement("fieldset");var section=optionSections[i];container.id=section.optionId;var header=document.createElement("legend");header.innerHTML=section.heading;section.installTo(container);container.insertBefore(header,container.firstChild);optionsContainer.appendChild(container);var setting=Caniuse.config[section.optionId];if(setting){setting.setInitialValue(section.getValuesForConfig())}}
Caniuse.mediator.publish("optionsInitialized",null);addSidebarToggle();toggleOptions(!1,!0)}
function featureListReady(featureList){featureList.installTo(getElem('.js-feature-list'))}
function optionTagsReady(optionTags){optionTags.installTo(getElem('.js-feature-list-wrap'))}
Caniuse.module.domManager={init:init}}(Caniuse));(function(Caniuse){var currentLocation=null;var hashChangeSent=!1;var blockEffect=!1;function setHash(newHash,options){newHash=newHash.replace(/^#/,'');var currentHash=location.hash.replace(/^#/,'');if(newHash===currentHash){return}
hashChangeSent=!0;currentLocation=newHash;if(options&&options.blockEffect){if(history.pushState){history.pushState(null,null,'#'+newHash);var url=newHash.length?'#'+newHash:'';hashChangeSent=!1}else{blockEffect=!0;location.hash=newHash}}else{location.hash=newHash;console.log('New hash change:',currentLocation)}}
function getHashString(urlOrHash){var matches=urlOrHash.match(/\#(.*)/);return matches?matches[1]:""}
function handleLocationChange(){Caniuse.mediator.publish("locationChange",currentLocation)}
function handleNavigationRequest(href){var newLocation=getHashString(href);if(newLocation!==currentLocation){setHash(newLocation)}else{Caniuse.mediator.publish("locationToDefault")}}
function handleHashChange(evt){if(evt){evt.preventDefault()}
if(!hashChangeSent){var newLocation=getHashString(location.hash);if(newLocation!==currentLocation){currentLocation=newLocation;handleLocationChange()}}else{if(!blockEffect){handleLocationChange()}}
blockEffect=!1;hashChangeSent=!1}
Caniuse.Utils.Dom.listen(window,'hashchange',handleHashChange);Caniuse.mediator.subscribe("rootTabClicked",handleNavigationRequest);Caniuse.mediator.subscribe("hashChangeRequest",setHash);var historyManager=(function(){var getCurrentLocation=function(){return currentLocation};return{getHashString:getHashString,getCurrentLocation:getCurrentLocation}}());Caniuse.historyManager=historyManager;var optionsAreInitialized=!1;var featureListIsReady=!1;function handleHashChangeWhenReady(){if(optionsAreInitialized&&featureListIsReady){handleHashChange()}}
Caniuse.mediator.subscribe("optionsInitialized",function(){optionsAreInitialized=!0;handleHashChangeWhenReady()});Caniuse.mediator.subscribe("featureListReady",function(){featureListIsReady=!0;handleHashChangeWhenReady()})}(Caniuse));(function sectionUIManager(Caniuse){var currentTabbedSection=null;var sectionsById={};var getElem=Caniuse.Utils.getElem;var TabbedSection=function(sectionId){var ACTIVE_TAB_CLASS="active";var _this=this;function getSection(id){var elem=document.getElementById(id);elem.removeAttribute('id');elem.classList.add('js-section-'+id);return elem}
function getTab(id){return getElem("a[href='#"+id+"']").parentNode}
this.select=function(){this.tab.classList.add(ACTIVE_TAB_CLASS);this.section.style.display='block'};this.deselect=function(){this.tab.classList.remove(ACTIVE_TAB_CLASS);this.section.style.display='none'};this.section=getSection(sectionId);this.tab=getTab(sectionId);Caniuse.Utils.Dom.listen(this.tab.firstChild,'click',function(evt){if(_this.tab===currentTabbedSection.tab){evt.preventDefault();displayPageSection('tables')}})};function init(){var ids=Caniuse.data.pageSectionIDs;for(var id in ids){sectionsById[id]=new TabbedSection(id)}}
function displayPageSection(pageSectionID,blockScroll){if(pageSectionID in sectionsById){if(currentTabbedSection){currentTabbedSection.deselect()}
currentTabbedSection=sectionsById[pageSectionID];currentTabbedSection.select();var publishDisplayed=function(){Caniuse.mediator.publish("pageSectionDisplayed",pageSectionID,{blockScroll:blockScroll})};publishDisplayed()}else{console.warn("Unable to find section "+pageSectionID)}}
function loadFastClick(){var supportsTouch=!1;if(('ontouchstart' in window)||window.DocumentTouch&&document instanceof window.DocumentTouch){supportsTouch=!0}
window.yepnope({test:supportsTouch,yep:'js/fastclick.min.js',callback:function(){window.FastClick.attach(document.body)}})}
var configInitialized=!1;Caniuse.mediator.subscribe("configInitialized",function(){configInitialized=!0});Caniuse.mediator.subscribe("domReady",function(){init();Caniuse.mediator.subscribe("displayPageSection",displayPageSection);Caniuse.mediator.subscribe("locationToDefault",function(){displayPageSection("home")});Caniuse.mediator.subscribe("searchFocused",function(){displayPageSection("tables",!0)});Caniuse.mediator.publish("sectionUIReady");loadFastClick()})}(Caniuse));(function stateChangeManager(Caniuse){var parameters=getDefaultParameters(),mediator=Caniuse.mediator,modeManager=Caniuse.modeManager,currentFeatures=[],searchString="";function getDefaultParameters(){}
function handleNonQuery(str){if(str in Caniuse.data.supportDataByFeature){handleStateChange('feat='+str)}else if(str in Caniuse.data.pageSectionIDs){mediator.publish("displayPageSection",str);scrollTo(0,0)}else{handleStateChange('search='+str)}}
function updateConfigFromURL(){if(!parameters){Caniuse.mediator.publish("locationToDefault");return}
var disableFilters=function(){parameters.feat=null;parameters.search=null;parameters.cats=null;parameters.statuses=null;parameters.compare=null};var filterPriority=["search","feat"];for(var i=0;i<filterPriority.length;i++){var id=filterPriority[i];if(id in parameters){var val=parameters[id];disableFilters();parameters[id]=val;break}}
var options=['feat','search','cats','statuses'];for(i=0;i<options.length;i++){var option=options[i];if(!(option in parameters)){parameters[option]=null}}
var config=Caniuse.config;for(var key in parameters){var stringValue=parameters[key];switch(key){case "cats":if("compare" in parameters){key="compare_cats"}
break}
if(key in config){if(stringValue===null){config[key].setValueToDefault(!0)}else{config[key].setValueFromURL(stringValue)}}}
Caniuse.updateLocation()}
function handleStateChange(location){if(!location.length){parameters=getDefaultParameters()}else if(location.indexOf('=')>-1){parameters=Caniuse.Utils.getParameters(location)}else{parameters=null;handleNonQuery(location);return}
updateConfigFromURL();Caniuse.mediator.publish("hashProcessed",{parameters:parameters,string:location})}
Caniuse.mediator.subscribe("locationChange",handleStateChange)}(Caniuse));(function newsDisplay(Caniuse){var initialized=!1;var makeElem=Caniuse.Utils.makeElem;var parent;function makeNewsItem(itemData){if(!itemData.description){return null}
var contentLines=itemData.description.split('\n');var content='<p>'+contentLines.join('</p><p>')+'</p>';var contentElem=makeElem('div',{'class':'news-item__content'});contentElem.innerHTML=content;var article=makeElem('article',{'class':'news-item'},[makeElem('date',{'class':'news-item__date'},itemData.date),makeElem('h3',{'class':'news-item__heading'},itemData.title),contentElem]);return article}
function init(){if(initialized){return}
parent.appendChild(makeElem('h3',{'class':'ciu-section-heading'},'News'));Caniuse.Utils.ajax('/process/get_news.php',{success:function(dataStr){var newsArr=JSON.parse(dataStr);var fragment=makeElem();for(var i=0;i<30;i++){var item=newsArr[i];var elem=makeNewsItem(item);if(elem){fragment.appendChild(elem)}}
parent.appendChild(fragment)},error:function(){console.error('failed to get news')}});initialized=!0}
Caniuse.mediator.subscribe("domReady",function(){parent=Caniuse.Utils.getElem('.js-news-root')});Caniuse.mediator.subscribe("displayPageSection",function(pageId){if(pageId==='info_news'){init()}})}(Caniuse))})();(function(){var micromarkdown={regexobject:{lists:/^((\s*((\*|\-)|\d(\.|\))) [^\n]+)\n)+/gm,code:/`(.*?)`/g,bolditalic:/(?: ([\*_~]{1,3}))([^\*_~\n]+[^\*_~\s])\1/g,links:/!?\[([^\]<>]+)\]\(([^ \)<>]+)( "[^\(\)\"]+")?\)/g,url:/<([a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?)>/g},parse:function(str,strict){'use strict';var line,nstatus=0,status,cel,calign,indent,helper,helper1,helper2,count,repstr,stra,trashgc=[],casca=0,i=0,j=0;str='\n'+str+'\n';if(strict!==!0){micromarkdown.regexobject.lists=/^((\s*(\*|\d\.) [^\n]+)\n)+/gm}
while((stra=micromarkdown.regexobject.lists.exec(str))!==null){casca=0;if((stra[0].trim().substr(0,1)==='*')||(stra[0].trim().substr(0,1)==='-')){repstr='<ul>'}else{repstr='<ol>'}
helper=stra[0].split('\n');helper1=[];status=0;indent=!1;for(i=0;i<helper.length;i++){if((line=/^((\s*)((\*|\-)|\d(\.|\))) ([^\n]+))/.exec(helper[i]))!==null){if((line[2]===undefined)||(line[2].length===0)){nstatus=0}else{if(indent===!1){indent=line[2].replace(/\t/,'    ').length}
nstatus=Math.round(line[2].replace(/\t/,'    ').length/indent)}
while(status>nstatus){repstr+=helper1.pop();status--;casca--}
while(status<nstatus){if((line[0].trim().substr(0,1)==='*')||(line[0].trim().substr(0,1)==='-')){repstr+='<ul>';helper1.push('</ul>')}else{repstr+='<ol>';helper1.push('</ol>')}
status++;casca++}
repstr+='<li>'+line[6]+'</li>'+'\n'}}
while(casca>0){repstr+='</ul>';casca--}
if((stra[0].trim().substr(0,1)==='*')||(stra[0].trim().substr(0,1)==='-')){repstr+='</ul>'}else{repstr+='</ol>'}
str=str.replace(stra[0],repstr+'\n')}
for(i=0;i<3;i++){while((stra=micromarkdown.regexobject.bolditalic.exec(str))!==null){repstr=[];if(stra[1]==='~~'){str=str.replace(stra[0],'<del>'+stra[2]+'</del>')}else{switch(stra[1].length){case 1:repstr=[' <i>','</i>'];break;case 2:repstr=['<b>','</b>'];break;case 3:repstr=['<i><b>','</b></i>'];break}
str=str.replace(stra[0],repstr[0]+stra[2]+repstr[1])}}}
while((stra=micromarkdown.regexobject.links.exec(str))!==null){if(stra[0].substr(0,1)==='!'){str=str.replace(stra[0],'<img src="'+stra[2]+'" alt="'+stra[1]+'" title="'+stra[1]+'" />')}else{str=str.replace(stra[0],'<a '+micromarkdown.mmdCSSclass(stra[2],strict)+'href="'+stra[2]+'">'+stra[1]+'</a>')}}
while((stra=micromarkdown.regexobject.url.exec(str))!==null){repstr=stra[1];if(repstr.indexOf('://')===-1){repstr='http://'+repstr}
str=str.replace(stra[0],'<a '+micromarkdown.mmdCSSclass(repstr,strict)+'href="'+repstr+'">'+repstr.replace(/(https:\/\/|http:\/\/|mailto:|ftp:\/\/)/gmi,'')+'</a>')}
while((stra=micromarkdown.regexobject.code.exec(str))!==null){str=str.replace(stra[0],'<code>'+stra[1]+'</code>')}
str=str.replace(/^\n|\n$/g,'');str=str.replace(/[\n]{2,}/gmi,'<br/><br/>');str=str.replace(/\n/gmi,'<br/>');return str},htmlEncode:function(str){'use strict';var div=document.createElement('div');div.appendChild(document.createTextNode(str));str=div.innerHTML;div=undefined;return str},mmdCSSclass:function(str,strict){'use strict';return ''}};if(window.Caniuse&&window.Caniuse.Utils){window.Caniuse.Utils.nanomarkdown=micromarkdown}}());(function optionUIManager(Caniuse){"use strict";var Dom=Caniuse.Utils.Dom;var makeElem=Caniuse.Utils.makeElem;var getElem=Caniuse.Utils.getElem;var getElems=Caniuse.Utils.getElems;var optionClasses=[UsageOptionSet,UsageRegionOptionSet,BrowserSetOptionSet,BrowserOptionSet,CategoryOptionSet,StatusesOptionSet,MiscOptionSet,FeatureSortOptionSet];var optionSetsById={};function ucfirst(str){return str.substring(1,0).toUpperCase()+str.substr(1)}
function makeCheckBox(args){var checked=args.isChecked?' checked':'';var id=args.id?' id="'+args.id+'"':'';var classes=args.classes?' class="'+args.classes+'"':'';var dataAttr=args.dataVal?' data-'+args.dataVal:'';var labelClasses=args.labelClasses?' class="'+args.labelClasses+'"':'';var labelTitle=args.labelTitle?' title="'+args.labelTitle+'"':'';return '<label'+labelClasses+labelTitle+'>'+'<input type="checkbox" value="'+args.val+'"'+id+classes+dataAttr+checked+'>'+(args.urlParam?'<a href="#'+args.urlParam+'='+args.val+'">'+args.label+'</a>':args.label)+'<\/label>'}
function makeSelectAllCheckBox(selectId,val,label){label=label||'All';val=val||'all';return makeCheckBox({val:val,label:label,dataVal:'select-subjects="'+selectId+'"'})}
function setupMultiCheckboxSelect(master,children,changeCallback,instance){function masterChanged(){var masterChecked=master.checked;for(var i=0;i<children.length;i++){var child=children[i];child.checked=masterChecked}
if(changeCallback)
changeCallback.call(instance)}
function checkMasterBasedOnChildren(){var masterChecked=!0;for(var i=0;i<children.length;i++){var child=children[i];if(!child.checked){masterChecked=!1;break}}
master.checked=masterChecked}
function childChanged(){checkMasterBasedOnChildren();if(changeCallback)
changeCallback.call(instance)}
master.addEventListener("change",masterChanged,!1);for(var i=0;i<children.length;i++){var child=children[i];child.addEventListener("change",childChanged,!1)}
return checkMasterBasedOnChildren}
function objectToArray(obj){var outputArr=[];for(var key in obj){var val=obj[key];if(val===!0){outputArr.push(key)}}
return outputArr}
function setObjectFromList(obj,parts){for(var key in obj){if(parts.indexOf(key)>-1){obj[key]=!0}else{obj[key]=!1}}}
function updateCheckboxesFromValues(inputs,values){for(var i=0;i<inputs.length;i++){var input=inputs[i];var val=input.value;var isShown=(values[val]===!0);input.checked=isShown}}
function OptionSet(){this.optionId="";this.supportId="";this.heading="";this._configSetting=null;this._changeHandler=null;this._optionData=null;this._html=null;this._container=null;this._cleanupFuncs=[];this._values={}}
OptionSet.prototype.init=function(supportData){this._optionData=supportData[this.supportId];this._configSetting=Caniuse.config[this.optionId]};OptionSet.prototype._inputsChanged=function(){var configValues=this.getValuesForConfig();if(this._changeHandler){this._changeHandler(this.optionId,this._values)}else{this._configSetting.setValueFromUI(configValues)}};OptionSet.prototype.setChangeHandler=function(changeHandler){this._changeHandler=changeHandler};OptionSet.prototype.getValuesForConfig=function(){if(this._checkboxInputs){this.getValuesFromCheckboxes();return objectToArray(this._values)}else{return this._values}};OptionSet.prototype.updateFromConfig=function(){var setting=this._configSetting;if(!setting){return}
var val=setting.value;if(val===Caniuse.configVal.NOT_APPLICABLE){}else if(setting.matchesAll()){for(var key in this._values){this._values[key]=!0}}else{setObjectFromList(this._values,val)}
if(this._checkboxInputs){updateCheckboxesFromValues(this._checkboxInputs,this._values)}
this.cleanup()};OptionSet.prototype.installTo=function(container){this._container=container;if(this._html){container.innerHTML=this._html}
var _this=this;Caniuse.mediator.subscribe("configChanged",function(data){if(data.changeSource!==Caniuse.changeType.UI){if(_this.optionId==data.option){_this.updateFromConfig()}}})};OptionSet.prototype.setupDefaultMultiCheckboxSelect=function(id){var container=this._container;var trigger=container.querySelector("input[data-select-subjects='"+id+"']");var subjects=container.querySelectorAll("input[data-select-id='"+id+"']");var cleanupFunc=setupMultiCheckboxSelect(trigger,subjects,this._inputsChanged,this);this._cleanupFuncs.push(cleanupFunc)};OptionSet.prototype.onDisplay=function(){};OptionSet.prototype.cleanup=function(){for(var i=0;i<this._cleanupFuncs.length;i++){this._cleanupFuncs[i].call(null)}};OptionSet.prototype.getValuesFromCheckboxes=function(){if(!this._checkboxInputs){throw Error("No checkboxes for "+this.optionId)}
var inputs=this._checkboxInputs;for(var i=0;i<inputs.length;i++){var input=inputs[i];this._values[input.value]=input.checked}
return this._values};function BrowserOptionSet(){OptionSet.apply(this,arguments);this.optionId="agents";this.supportId="browsersByType";this.heading="Browsers";this._checkboxInputs=null}(function(){BrowserOptionSet.prototype=new OptionSet();BrowserOptionSet.prototype.init=function(optionData){OptionSet.prototype.init.apply(this,arguments);var browsersByType=this._optionData;var allBrowsers=[];var makeBrowserTypeOptions=function(){var output='';var typeLabel=ucfirst(type);var browsers=browsersByType[type];output+=makeSelectAllCheckBox(type,type,typeLabel);output+='<div class="browser-list--'+type+'">';for(var agentId in browsers){var agentData=browsers[agentId];allBrowsers.push(agentId);output+=makeCheckBox({val:agentId,label:agentData.browser,labelClasses:'sub',classes:'browser',dataVal:'select-id="'+type+'"'})}
output+='</div>';return output};var html='';html+=makeSelectAllCheckBox('all-browsers');for(var type in browsersByType){html+='<div class="optwrap">';html+=makeBrowserTypeOptions(type);html+='</div>'}
this._configSetting.setValuesForAll(allBrowsers);this._html=html};BrowserOptionSet.prototype.installTo=function(container){OptionSet.prototype.installTo.apply(this,arguments);var browserInputs=container.querySelectorAll("input.browser");this._checkboxInputs=browserInputs;this.getValuesFromCheckboxes();var allSelector="";for(var type in this._optionData){this.setupDefaultMultiCheckboxSelect(type);allSelector+="input[data-select-subjects='"+type+"'], "}
var allId="all-browsers";allSelector+="input.browser";var trigger=this._container.querySelector("input[data-select-subjects='"+allId+"']");var subjects=this._container.querySelectorAll(allSelector);var cleanupFunc=setupMultiCheckboxSelect(trigger,subjects,null,this);var _this=this;trigger.addEventListener("change",function(){_this._inputsChanged()},!1);this._cleanupFuncs.push(cleanupFunc);this.updateFromConfig()}}());function BrowserVersionOptionSet(){OptionSet.apply(this,arguments);this.optionId="compare";this.supportId="";this.heading="";this._checkboxInputs=null}(function(){BrowserVersionOptionSet.prototype=new OptionSet();BrowserVersionOptionSet.prototype.init=function(agents){OptionSet.prototype.init.apply(this,arguments);var html='';for(var agentId in agents){var agentData=agents[agentId];html+='<fieldset><legend>'+agentData.browser+'</legend>';var versionArr=agentData.version_list;for(var i=0;i<versionArr.length;i++){var data=versionArr[i];html+=makeCheckBox({val:agentId+'+'+data.version,label:data.version,labelTitle:(data.era===0?'Current version':null),labelClasses:(data.era===0?'label--current-version':null),dataVal:'select-id="'+this.optionId+'"'})}
html+='</fieldset>'}
html+='<button class="ciu-button browser-compare-reset">Reset selected browsers</button>';this._html=html};BrowserVersionOptionSet.prototype.installTo=function(container){OptionSet.prototype.installTo.apply(this,arguments);var selector="input[data-select-id='"+this.optionId+"']";this._checkboxInputs=container.querySelectorAll(selector);var _this=this;for(var i=0;i<this._checkboxInputs.length;i++){var input=this._checkboxInputs[i];Dom.listen(input,"change",_this._inputsChanged,this)}
this.getValuesFromCheckboxes();var resetButton=container.querySelector('.browser-compare-reset');Dom.listen(resetButton,'click',function(){for(var i=0;i<_this._checkboxInputs.length;i++){var input=_this._checkboxInputs[i];input.checked=!1}
_this._inputsChanged()});this.updateFromConfig()};BrowserVersionOptionSet.prototype.updateFromValues=function(values){for(var i=0;i<this._checkboxInputs.length;i++){var input=this._checkboxInputs[i];if(values[input.value]===!0){input.checked=!0}else{input.checked=!1}}
this._inputsChanged()}}());function CategoryOptionSet(){OptionSet.apply(this,arguments);this.optionId="cats";this.supportId="categories";this.heading="Categories";this._checkboxInputs=null}(function(){CategoryOptionSet.prototype=new OptionSet();CategoryOptionSet.prototype.init=function(optionData){OptionSet.prototype.init.apply(this,arguments);var categories=this._optionData;var html=makeSelectAllCheckBox(this.optionId);var allCats=[];for(var parentCatLabel in categories){allCats.push(parentCatLabel);html+=makeCheckBox({val:parentCatLabel,label:parentCatLabel,dataVal:'select-id="'+this.optionId+'"',urlParam:this.optionId})}
this._configSetting.setValuesForAll(allCats);this._html=html};CategoryOptionSet.prototype.installTo=function(container){var _this=this;OptionSet.prototype.installTo.apply(this,arguments);this.setupDefaultMultiCheckboxSelect(this.optionId);var selector="input[data-select-id='"+this.optionId+"']";this._checkboxInputs=container.querySelectorAll(selector);var handleLinkClick=function(evt){evt.preventDefault();var href=evt.target.getAttribute('href');var parts=href.split('=');var key=parts[0].substr(1);var val=parts[1].split(',');Caniuse.config[key].setValueFromUI(val);_this.updateFromConfig()};var links=getElems('a',container);for(var i=0;i<links.length;i++){Dom.listen(links[i],'click',handleLinkClick)}
this.getValuesFromCheckboxes();this.updateFromConfig()}}());function StatusesOptionSet(){OptionSet.apply(this,arguments);this.optionId="statuses";this.supportId="statuses";this.heading="Statuses";this._checkboxInputs=null}(function(){StatusesOptionSet.prototype=new OptionSet();StatusesOptionSet.prototype.init=function(optionData){OptionSet.prototype.init.apply(this,arguments);var statuses=this._optionData;var html=makeSelectAllCheckBox(this.optionId);var allStatuses=[];for(var statusId in statuses){var statusLabel=statuses[statusId];allStatuses.push(statusId);var label=statusId.length<=3?statusId.toUpperCase():statusId;html+=makeCheckBox({val:statusId,label:label,dataVal:'select-id="'+this.optionId+'"',urlParam:'statuses'})}
this._configSetting.setValuesForAll(allStatuses);this._html=html};StatusesOptionSet.prototype.installTo=function(container){OptionSet.prototype.installTo.apply(this,arguments);this.setupDefaultMultiCheckboxSelect(this.optionId);var selector="input[data-select-id='"+this.optionId+"']";this._checkboxInputs=container.querySelectorAll(selector);this.getValuesFromCheckboxes();this.updateFromConfig()}}());function UsageOptionSet(){OptionSet.apply(this,arguments);this.optionId="versions_shown";this.heading='Usage data';this.supportId=null;this._checkboxInputs=null;this._usageThresholdInput=null;this._rangeAttributes={step:0.1,min:0,max:10,value:0};this._usageThresholdLabelElement=null;this._usageThresholdLabelClass='usage-val';this._missingValueLabelElement=null;this._missingValueLabelClass='missing-val';this._installCallbacks=[]}(function(){var thresholdElement;UsageOptionSet.prototype=new OptionSet();UsageOptionSet.prototype.addUsageSource=function(id,label){var _this=this;var func=function(){var onSelectionChange=function(evt){Caniuse.config.primary_usage.setValueFromUI(this.value)};if(!_this.usageSourceSelect){var sourceContainer=makeElem('div',{'class':'settings__subset'},null);var labelElem=makeElem('label',{'class':'settings-label','for':'usage-source-select'},'Source:');_this.usageSourceSelect=makeElem('select',{id:'usage-source-select'},null,{change:onSelectionChange});_this.deleteUsageButton=makeElem('button',{'class':'ciu-button ciu-button--small  delete-usage-btn'},'Delete',{click:function(){var currentVal=_this.usageSourceSelect.value;if(currentVal=='region.global'){window.alert('Cannot delete global data')}else{var name=Caniuse.data.localUsageMap[currentVal].name;var result=window.confirm('Remove usage data for "'+name+'"?');if(result){Caniuse.mediator.publish("deleteUsageRequest",currentVal)}}}});sourceContainer.appendChild(labelElem);sourceContainer.appendChild(makeElem('div',{'class':'select'},[_this.usageSourceSelect]));sourceContainer.appendChild(_this.deleteUsageButton);var globalOption=makeElem('option',{value:'region.global'},'Global');_this.usageSourceSelect.appendChild(globalOption);Dom.prepend(_this._container,sourceContainer)}
var option=makeElem('option',{value:id},label);_this.usageSourceSelect.appendChild(option);var primaryId=Caniuse.config.primary_usage.value;_this.usageSourceSelect.value=primaryId};if(_this._container){func.call(this)}else{this._installCallbacks.push(func)}};UsageOptionSet.prototype.removeUsageSource=function(usageId){var options=this.usageSourceSelect.childNodes;for(var i=0;i<options.length;i++){var option=options[i];if(option.value==usageId){Dom.remove(option);break}}};UsageOptionSet.prototype.init=function(optionData){OptionSet.prototype.init.apply(this,arguments);var attrs=this._rangeAttributes;var html="";var _this=this;var tooltip='Show only browser versions with at least this much usage (current and future always shown)';html='<div class="settings__subset">'+'<label title="'+tooltip+'">Min. browser usage: <span class="'+_this._usageThresholdLabelClass+'"></span>%: '+'<input class="usage-threshold" type="range"'+' step="'+attrs.step+'"'+' min="'+attrs.min+'"'+' max="'+attrs.max+'"'+' value="'+attrs.value+'">'+'</label>'+'</div>';html+='<p class="settings__subset dim" title="The total percentage of user share that is being hidden">'+'Total users not shown: <span class="'+_this._missingValueLabelClass+'"></span>%'+'</p>';_this._html=html;Caniuse.mediator.subscribe("configChanged",function(data){if(data.option==="usage_threshold"){_this._updateLabels()}else if(data.option==='primary_usage'&&data.changeSource!==Caniuse.changeType.UI&&_this.usageSourceSelect){_this.usageSourceSelect.value=data.values}})};var updateSlider=function(){var thresholdSetting=Caniuse.config.usage_threshold;var settingValue=thresholdSetting.getValueForSlider();thresholdElement.value=settingValue};var handleThresholdLabelBlur=function(evt){var el=evt.target;var content=el.textContent;var thresholdSetting=Caniuse.config.usage_threshold;if(content===''){thresholdSetting.setValueToDefault();content=thresholdSetting.value}else if(isNaN(content)){el.innerHTML=el.getAttribute('data-orig');return}else if(content>100){content=100}else if(content<0){content=0}else{content=+content}
el.innerHTML=content;thresholdSetting.setValue(content);updateSlider()};var handleThresholdLabelFocus=function(evt){evt.stopPropagation();setTimeout(function(){var el=evt.target;el.focus();document.execCommand('selectAll',!1,null);evt.target.setAttribute('data-orig',evt.target.textContent)},1)};UsageOptionSet.prototype._updateLabels=function(){var thresholdSetting=Caniuse.config.usage_threshold;var val=thresholdSetting.value;if(!this._usageThresholdLabelElement){this._usageThresholdLabelElement=this._container.querySelector("."+this._usageThresholdLabelClass);this._usageThresholdLabelElement.contentEditable=!0;Dom.listen(this._usageThresholdLabelElement,'focus',handleThresholdLabelFocus);Dom.listen(this._usageThresholdLabelElement,'blur',handleThresholdLabelBlur);Dom.listen(this._usageThresholdLabelElement,'click',handleThresholdLabelFocus)}
this._usageThresholdLabelElement.innerHTML=val};UsageOptionSet.prototype.onDisplay=function(){if(this.polyfillReady){return}
var rangeSupport=!1;var rangetest=document.createElement('input');try{rangetest.type='range';rangeSupport=(rangetest.type==='range')}catch(e){}
yepnope({test:rangeSupport,nope:'js/range.polyfill.js',callback:function(url,result,key){if(result){return}
var link=makeElem('link',{'rel':'stylesheet',href:'css/range.polyfill.css'});getElem('head').appendChild(link);setTimeout(function(){if("fdSlider" in window&&typeof(fdSlider.onDomReady)!="undefined"){try{fdSlider.onDomReady()}catch(err){}}},100)}});this.polyfillReady=!0};UsageOptionSet.prototype.installTo=function(container){OptionSet.prototype.installTo.apply(this,arguments);var _this=this;var thresholdSetting=Caniuse.config.usage_threshold;thresholdElement=getElem('.usage-threshold',container);updateSlider();this._updateLabels();var handleSliderChange=function(){thresholdSetting.setValueFromSlider(thresholdElement.value)};Dom.listen(thresholdElement,'change',handleSliderChange);Dom.listen(thresholdElement,'input',handleSliderChange);if(!this._missingValueLabelElement){this._missingValueLabelElement=this._container.querySelector("."+this._missingValueLabelClass)}
Caniuse.mediator.subscribe('missingUsageUpdate',function(newAmount){_this._missingValueLabelElement.innerHTML=Caniuse.Utils.percFormat(newAmount,2)});for(var i=0;i<this._installCallbacks.length;i++){this._installCallbacks[i].call(this)}
Caniuse.mediator.subscribe('optionsToggled',function(isShown){if(isShown){_this.onDisplay()}})}}());function UsageRegionOptionSet(){OptionSet.apply(this,arguments);this.optionId="usage_region";this.heading='Add usage source';this.supportId=null;this.container=null}(function(){UsageRegionOptionSet.prototype=new OptionSet();UsageRegionOptionSet.prototype.getValuesForConfig=function(){return this._configSetting.value};UsageRegionOptionSet.prototype.onDisplay=function(){};UsageRegionOptionSet.prototype.getRegionList=function(regionNameById){var regionIdByName={};var listId='usage-regions';var inputField=this.inputField;this.inputField.setAttribute('list',listId);var dataList=this.dataList=makeElem('datalist',{id:listId});this.container.appendChild(dataList);if(!regionNameById){window.console.error("Failed to receive region name list");return}
var supportsDatalist=!!(document.createElement('datalist')&&window.HTMLDataListElement);var needsSelect=(navigator.userAgent.indexOf('MSIE')>-1&&!supportsDatalist);var select;if(needsSelect){select=makeElem('select');select.setAttribute('data-datalist',listId);dataList.appendChild(select)}
for(var regionId in regionNameById){var fullName=regionNameById[regionId];regionIdByName[fullName]=regionId;var option=document.createElement('option');option.value=fullName;if(needsSelect){select.appendChild(option)}else{dataList.appendChild(option)}}
Caniuse.regionNameById=regionNameById;Caniuse.regionIdByName=regionIdByName;yepnope({test:supportsDatalist,nope:'js/datalist.polyfill.js'});var progressBar=makeElem('div',{'style':'display:none','class':'progress-bar'},'Importing...');var importButton=makeElem('button',{'class':'ciu-button ciu-button--region-import'},'Import');var handleRegionDataRequest=function(){progressBar.style.display='block';importButton.setAttribute('disabled','disabled')};importButton.onclick=function(){var selectedId=regionIdByName[inputField.value];if(!selectedId){window.alert("Invalid region");inputField.focus();return}
if('region.'+selectedId in Caniuse.data.localUsageMap){window.alert("Selected region already imported");inputField.focus();return}
Caniuse.mediator.publish("requestRegionData",{regionId:selectedId})};var dataReceived=function(){progressBar.style.display='none';importButton.removeAttribute('disabled');inputField.value=''};Caniuse.mediator.subscribe("usageDataFound",dataReceived);Caniuse.mediator.subscribe("usageDataReceived",dataReceived);Caniuse.mediator.subscribe("usageDataRequestFailed",dataReceived);Caniuse.mediator.subscribe("requestRegionData",handleRegionDataRequest);var importElems=makeElem(null,null,[importButton,progressBar,dataList]);Dom.insertAfter(importElems,inputField);Caniuse.mediator.publish("regionOptionSetReady",regionNameById)};UsageRegionOptionSet.prototype.populateRegionOptions=function(){var _this=this;Caniuse.Utils.ajax('/resources/statcounter-regions.json',{success:function(json){_this.getRegionList.call(_this,JSON.parse(json))}})};UsageRegionOptionSet.prototype.installTo=function(container){OptionSet.prototype.installTo.apply(this,arguments);this.container=container;var regionHeader=makeElem('h4',{'class':'settings__subhead'},'From geography:');var analyticsHeader=makeElem('h4',{'class':'settings__subhead'},'From Google Analytics:');var analyticsButton=makeElem('button',{'class':'ciu-button  ciu-button--ga-import'},'Import...',{click:function(){Caniuse.mediator.publish('analyticsImportRequest')}});var inputField=this.inputField=makeElem('input',{'class':'region-input',name:'usage-region',placeholder:'Enter country/region'},null,{click:function(){this.select()}});container.appendChild(regionHeader);container.appendChild(inputField);container.appendChild(analyticsHeader);container.appendChild(analyticsButton);var _this=this;Caniuse.mediator.subscribe('optionsToggled',function(isShown){if(isShown){_this.onDisplay()}});Caniuse.mediator.subscribe("secondaryInit",function(){_this.populateRegionOptions()});Caniuse.mediator.subscribe("requestUsageUpdate",function(usageId){var parts=usageId.split('.');var type=parts[0];var subId=parts[1];if(type=='region'){Caniuse.mediator.publish("requestRegionData",{regionId:subId,updateOnly:!0})}},this)}}());function MiscOptionSet(){OptionSet.apply(this,arguments);this.optionId="misc";this.heading='Misc'}(function(){MiscOptionSet.prototype=new OptionSet();MiscOptionSet.prototype.init=function(optionData){var _this=this;OptionSet.prototype.init.apply(this,arguments);Caniuse.mediator.subscribe("configChanged",function(data){if(data.changeSource!==Caniuse.changeType.UI){if('accessible_colors'==data.option){_this.checkboxElem.checked=data.values}}})};MiscOptionSet.prototype.addAccessibleColors=function(){var configSetting=Caniuse.config.accessible_colors;var checkboxElem=makeElem('input',{type:'checkbox'},null,{change:function(){configSetting.setValueFromUI(this.checked)}});if(configSetting.value===!0){checkboxElem.checked=!0}
var optionLabel=makeElem('label',null,[checkboxElem,'Accessible colors']);this.checkboxElem=checkboxElem;this.container.appendChild(optionLabel)};MiscOptionSet.prototype.addShowFullPrefix=function(){var configSetting=Caniuse.config.show_full_prefix;var checkboxElem=makeElem('input',{type:'checkbox'},null,{change:function(){configSetting.setValueFromUI(this.checked)}});if(configSetting.value===!0){checkboxElem.checked=!0}
var optionLabel=makeElem('label',null,[checkboxElem,'Show full prefixes']);this.container.appendChild(optionLabel)};MiscOptionSet.prototype.installTo=function(container){OptionSet.prototype.installTo.apply(this,arguments);this.container=container;this.addAccessibleColors();this.addShowFullPrefix()}}());function BrowserSetOptionSet(){OptionSet.apply(this,arguments);this.optionId="primary_browserset";this.heading='Browser set'}(function(){BrowserSetOptionSet.prototype=new OptionSet();BrowserSetOptionSet.prototype.init=function(){OptionSet.prototype.init.apply(this,arguments);this._configSetting.value=Caniuse.config[this.optionId].value};BrowserSetOptionSet.prototype.updateFromConfig=function(){this.selectElem.value=Caniuse.config[this.optionId].value;this.updateButtons()};BrowserSetOptionSet.prototype.getValuesForConfig=function(){return this._configSetting.value};BrowserSetOptionSet.prototype.fetchBrowserSets=function(){return Caniuse.browserSets};BrowserSetOptionSet.prototype.updateList=function(container){var options=this.fetchBrowserSets();Dom.empty(this.selectElem);var defaultOption=makeElem('option',{value:''},'(none)');this.selectElem.appendChild(defaultOption);for(var optionId in options){var option=options[optionId];var optionLabel=option.name;var optionEl=makeElem('option',{value:optionLabel},optionLabel);this.selectElem.appendChild(optionEl)}};BrowserSetOptionSet.prototype.updateButtons=function(){var isNone=(this.selectElem.value==='');this.editSetButton.disabled=isNone;this.deleteSetButton.disabled=isNone;var titleAttr;if(isNone){titleAttr=''}else{var setData=Caniuse.getBrowserSet();titleAttr=setData.rules.join('\n')}
this.selectElem.title=titleAttr};BrowserSetOptionSet.prototype.handleIncludeCurrentChange=function(){var input=getElem('.js-include-current');Caniuse.config.include_current.setValue(input.checked)};BrowserSetOptionSet.prototype.installTo=function(container){OptionSet.prototype.installTo.apply(this,arguments);this.container=container;var configId=this.optionId;var btn=makeElem('button',{'class':'ciu-button  ciu-button--small  js-add-browserset'},'Add new set',{'click':function(){Caniuse.mediator.publish('browsersetAddRequest')}});var checkboxLabel=makeElem('label',{'class':'label--small'},[makeElem('input',{type:'checkbox','class':'js-include-current'},[],{change:this.handleIncludeCurrentChange.bind(this)}),'Always show current & upcoming']);checkboxLabel.firstChild.checked=Caniuse.config.include_current.value;var selectElem=makeElem('select',null,null,{change:function(){Caniuse.config[this.optionId].setValueFromUI(this.selectElem.value);this.updateButtons()}.bind(this)});this.selectElem=selectElem;var selectWrap=makeElem('div',{'class':'select'},[selectElem]);this.updateList();this.editSetButton=makeElem('button',{'class':'ciu-button ciu-button--small','disabled':'disabled'},'Edit',{click:function(){Caniuse.mediator.publish('browsersetEditRequest',selectElem.value)}});this.deleteSetButton=makeElem('button',{'class':'ciu-button ciu-button--small','disabled':'disabled'},'Delete',{click:function(){var currentVal=selectElem.value;if(currentVal===''){return}
var result=window.confirm('Remove "'+currentVal+'"?');if(result){Caniuse.mediator.publish("deleteBrowserSetRequest",currentVal)}}});Caniuse.mediator.subscribe('browserSetsChanged',function(){this.updateList();this.updateFromConfig()}.bind(this));var optionWrap=makeElem('div',{'class':'browserset-controls'});container.appendChild(checkboxLabel);optionWrap.appendChild(selectWrap);optionWrap.appendChild(this.deleteSetButton);optionWrap.appendChild(this.editSetButton);container.appendChild(optionWrap);container.appendChild(btn);this.updateFromConfig()}}());function FeatureSortOptionSet(){OptionSet.apply(this,arguments);this.optionId="feature_sort";this.heading='List sort'}(function(){FeatureSortOptionSet.prototype=new OptionSet();FeatureSortOptionSet.prototype.init=function(){OptionSet.prototype.init.apply(this,arguments);this._configSetting.value=Caniuse.config[this.optionId].value};FeatureSortOptionSet.prototype.updateFromConfig=function(){this.selectElem.value=this._configSetting.value};FeatureSortOptionSet.prototype.getValuesForConfig=function(){return this._configSetting.value};FeatureSortOptionSet.prototype.installTo=function(container){OptionSet.prototype.installTo.apply(this,arguments);this.container=container;var sortOptions=Caniuse.data.sortOptions;var configId=this.optionId;var selectElem=makeElem('select',null,null,{change:function(){Caniuse.config[configId].setValueFromUI(this.value)}});for(var optionId in sortOptions){var optionLabel=sortOptions[optionId];var option=makeElem('option',{value:optionId},optionLabel);selectElem.appendChild(option)}
this.selectElem=selectElem;var selectWrap=makeElem('div',{'class':'select'},[selectElem]);container.appendChild(selectWrap)}}());for(var i=0;i<optionClasses.length;i++){var optionSet=new optionClasses[i]();optionSetsById[optionSet.optionId]=optionSet}
var versionSet=optionSetsById.versions_shown;var addUsageOption=function(data){versionSet.addUsageSource(data.uid,data.shortName||data.name)};var removeUsageSource=function(usageId){versionSet.removeUsageSource(usageId)};Caniuse.mediator.subscribe("usageDataFound",addUsageOption);Caniuse.mediator.subscribe("usageDataReceived",function(args){if(args.initialRequest){addUsageOption(args.usageData)}});Caniuse.mediator.subscribe("deleteUsageRequest",removeUsageSource);var dataReady=function dataReady(supportData){var optionData=[];for(var id in optionSetsById){var optionSet=optionSetsById[id];optionSet.init(supportData);optionData.push(optionSet)}
Caniuse.mediator.subscribe("domReady",function(){Caniuse.mediator.publish("optionsReady",optionData)})};Caniuse.mediator.subscribe("supportDataReady",dataReady);Caniuse.CategoryOptionSet=CategoryOptionSet;Caniuse.BrowserVersionOptionSet=BrowserVersionOptionSet})(Caniuse);(function featureListGenerator(Caniuse){"use strict";var featureList;var browserListModel;var featureListView;var summaryModel;var usageModel;var allData=null;var isSectionDisplayed;var Dom=Caniuse.Utils.Dom;var makeElem=Caniuse.Utils.makeElem;var getElem=Caniuse.Utils.getElem;var mediator=Caniuse.mediator;var parseText=Caniuse.Utils.parseText;var PAGE_ID="tables";var MIN_WIDTH=60;var CELL_HEIGHT=30;var CELL_GAP=2;var alwaysWebkitFeats=['text-stroke'];var supportValueMap={};var percFormat=Caniuse.Utils.percFormat;var ViewMode={NORMAL:"view-mode-normal",USAGE_RELATIVE:"view-mode-usage_relative",DATE_RELATIVE:"view-mode-date_relative"};var SupportLevel=function(supportLetter,supportNumber){this.amount=supportNumber;this.letter=supportLetter};var SupportLevelValue={UNKNOWN:new SupportLevel("u",0),NOT_SUPPORTED:new SupportLevel("n",0),PARTIALLY_SUPPORTED:new SupportLevel("a",0.5),SUPPORTED:new SupportLevel("y",1)};var UsageSet=function(id,name){var set={id:id,all:{y:0,a:0},unprefixed:{y:0,a:0},name:name};if(id.indexOf('region.')===0){var countryCode=id.split('.')[1];set.shortName=Caniuse.data.regionAliases[countryCode]}
return set};var checkPrefix=function(prefix,id){if(alwaysWebkitFeats.indexOf(id)>-1){return 'webkit'}else{return prefix}}
var SupportValue=function(valueString){var _this=this;_this.valueString=valueString;_this.supportLevel=null;_this.isPrefixed=!1;_this.hasPolyfill=!1;_this.isDisabled=!1;_this.supportClasses='';_this.noteNumbers=[];if(valueString.indexOf('#')>-1){_this.supportClasses=valueString.replace(/\#\d+ ?/g,'')}else{_this.supportClasses=valueString}
var tokens=valueString.split(" ");for(var i=0;i<tokens.length;i++){var token=tokens[i];switch(token){case 'y':_this.supportLevel=SupportLevelValue.SUPPORTED;break;case 'a':_this.supportLevel=SupportLevelValue.PARTIALLY_SUPPORTED;break;case 'u':_this.supportLevel=SupportLevelValue.UNKNOWN;break;case 'p':_this.hasPolyfill=!0;_this.supportLevel=SupportLevelValue.NOT_SUPPORTED;break;case 'n':_this.supportLevel=SupportLevelValue.NOT_SUPPORTED;break;case 'x':_this.isPrefixed=!0;break;case 'd':_this.isDisabled=!0;break;default:var matches=/^#(\d+)$/.exec(token);if(matches&&matches.length>=2){var num=matches[1];_this.noteNumbers.push(num)}}}
_this.text=Caniuse.data.supportLegend[_this.supportLevel.letter];_this.hasFullSupport=(_this.supportLevel===SupportLevelValue.SUPPORTED);_this.hasPartialSupport=(_this.supportLevel===SupportLevelValue.PARTIALLY_SUPPORTED)};var UsageModel=Stapes.subclass({constructor:function(){this.getSettingsFromConfig();this.usageByType={'region':{'global':null},'custom':null};this.dataById={}},getSettingsFromConfig:function(){var config=Caniuse.config;this.set('usageThreshold',config.usage_threshold.value);this.set('primaryUsage',config.primary_usage.value)},add:function(usageData){var type=usageData.type;var id=usageData.uid;var name=usageData.name;var data=usageData.dataByBrowser;var oldVersion='5.0-8.0';if('op_mini' in data&&oldVersion in data.op_mini){data.op_mini['0']=data.op_mini[oldVersion];delete data.op_mini[oldVersion]}
var byType=this.usageByType[type];if(!byType){this.usageByType[type]={}}
this.usageByType[type][id]=data;this.dataById[id]=usageData;this.getUnknownPerc(usageData);this.emit('usageAdded',usageData)},getTotalForBrowserSet:function(id,setName){var usageData=this.getUsageById(id);var total=0;browserListModel.eachBrowser(function(browser){var included=browser.browserSetState[setName];if(included){var versionUsages=usageData.dataByBrowser[browser.id];for(var i=0;i<browser.versionArray.length;i++){var version=browser.versionArray[i];var versionIncluded=version.browserSetState[setName];if(versionIncluded){total+=versionUsages[version.id]}}}});return total},getTotalForBrowserType:function(id,browserType){var usageData=this.getUsageById(id);var total=0;browserListModel.eachOfType(browserType,function(browser){var versions=usageData.dataByBrowser[browser.id];for(var version in versions){total+=versions[version]}});return total},getUnknownPerc:function(data){var known=0;for(var id in data.dataByBrowser){var versions=data.dataByBrowser[id];for(var version in versions){known+=versions[version]}}
return 100-known},remove:function(usageId){var usageData=this.dataById[usageId];delete this.dataById[usageId];this.emit('usageRemoved',usageData)},getUsageById:function(id){return this.dataById[id]}});usageModel=new UsageModel();var BrowserListModel=Stapes.subclass({constructor:function(rawBrowsersData){this.browsersById={};this.on('change:shownBrowsers',this.updateBrowserModels);for(var browserId in rawBrowsersData){var rawBrowserData=rawBrowsersData[browserId];rawBrowserData.id=browserId;this.browsersById[browserId]=new BrowserModel(rawBrowserData,this)}
this.updateShownFromConfig();this.set('primaryBrowserset',Caniuse.config.primary_browserset.value);usageModel.on('change:usageThreshold',this.handleUsageChange,this);usageModel.on('change:primaryUsage',this.handleUsageChange,this)},updateShownFromConfig:function(){var shownBrowsers=Caniuse.config.agents.value;this.set('shownBrowsers',shownBrowsers)},eachBrowser:function(cb){for(var browserId in this.browsersById){var browser=this.browsersById[browserId];cb(browser)}},eachOfType:function(type,cb){for(var browserId in this.browsersById){var browser=this.browsersById[browserId];if(browser.type===type){cb(browser,type)}}},readBrowserSet:function(browserSet){for(var browserId in this.browsersById){var browser=this.browsersById[browserId];browser.readBrowserSet(browserSet)}},filterByBrowserSet:function(browserSet){for(var browserId in this.browsersById){var browser=this.browsersById[browserId];browser.emit('browserSetChange',browserSet)}
if(!browserSet){this.updateShownFromConfig()}
this.emit('shownChange')},updateBrowserModels:function(shownArr){for(var browserId in this.browsersById){var isShown=(shownArr.indexOf(browserId)>-1);this.browsersById[browserId].set('isShown',isShown)}
this.emit('shownChange')},handleUsageChange:function(){this.getMissingUsage();this.emit('shownChange')},getMissingUsage:function(){var missingTotal=0;for(var browserId in this.browsersById){var browser=this.browsersById[browserId];missingTotal+=browser.getMissingUsage()}
Caniuse.mediator.publish('missingUsageUpdate',missingTotal)}});var BrowserModel=Stapes.subclass({constructor:function(rawBrowserData,browserListModel){this.browserListModel=browserListModel;this.id=rawBrowserData.id;this.name=rawBrowserData.browser;this.abbr=rawBrowserData.abbr;this.type=rawBrowserData.type;this.shortName=this._makeShortName();this.currentVersion=rawBrowserData.current_version;this.versionArray=[];this.versionsById={};this.browserSetState={};this.makeVersionArray(rawBrowserData.version_list);this.set('isShown',!1);this.on('browserSetChange',this.filterByBrowserSet.bind(this))},_makeShortName:function(){return this.name.replace(/ for| Browser/,'')},makeVersionArray:function(rawArray){var versionModel;for(var i=0;i<rawArray.length;i++){var data=rawArray[i];versionModel=new BrowserVersionModel(this,data);this.versionArray.push(versionModel);this.versionsById[versionModel.id]=versionModel}
this.lastEra=versionModel.era},readBrowserSet:function(browserSet){var browserVersionArr=browserSet.arr;var includedInSet=!1;for(var i=0;i<this.versionArray.length;i++){var versionModel=this.versionArray[i];if(versionModel.testBrowserSet(browserSet)){includedInSet=!0}}
this.browserSetState[browserSet.name]=includedInSet},filterByBrowserSet:function(browserSet){if(!browserSet){for(var i=0;i<this.versionArray.length;i++){var versionModel=this.versionArray[i];versionModel.filterByUsage()}
return}
if(!(browserSet.name in this.browserSetState)){throw Error('Browserset not yet read')}
var included=this.browserSetState[browserSet.name];this.set('isShown',included);if(included){for(var i=0;i<this.versionArray.length;i++){var versionModel=this.versionArray[i];versionModel.filterByBrowserSet(browserSet.name)}}},getMissingUsage:function(){var missingTotal=0;for(var i=0;i<this.versionArray.length;i++){var versionModel=this.versionArray[i];missingTotal+=versionModel.getMissingUsage()}
return missingTotal}});var BrowserVersionModel=Stapes.subclass({constructor:function(browserModel,rawVersionData){this.id=rawVersionData.version;this.browserModel=browserModel;this.era=rawVersionData.era;this.versionNumber=rawVersionData.version;this.shortVersion=this.getShortVersion();this.prefix=rawVersionData.prefix;this.releaseDate=rawVersionData.release_date?new Date(rawVersionData.release_date*1000):null;this.usageDataById={};this.browserSetState={};this.addFoundUsage();usageModel.on('change:usageThreshold',this.filterByUsage,this);usageModel.on('change:primaryUsage',this.filterByUsage,this);this.filterByUsage()},addFoundUsage:function(){usageModel.on('usageAdded',this.addUsage,this);var usageById=usageModel.dataById;for(var id in usageById){var usageData=usageById[id];this.addUsage(usageData)}},testBrowserSet:function(browserSet){var id=this.browserModel.id+' '+this.versionNumber;var included=browserSet.arr.indexOf(id)>-1;this.browserSetState[browserSet.name]=included;return included},filterByBrowserSet:function(browserSetName){this.set('isShown',this.browserSetState[browserSetName])},addUsage:function(usageData){var browserData=usageData.dataByBrowser[this.browserModel.id];var versionUsage;if(browserData){if(!(this.id in browserData)&&'0' in browserData){versionUsage=browserData['0']||0}else{versionUsage=browserData[this.id]||0}}else{versionUsage=0}
this.usageDataById[usageData.uid]={name:usageData.name,percentage:percFormat(versionUsage,2)};this.emit('usageDataChange')},getShortVersion:function(){if(this.versionNumber.indexOf('-')>-1){var lastNum=this.versionNumber.split('-')[1];return lastNum.replace(/\.0$/,'')}else{return this.versionNumber}},filterByUsage:function(){var primaryUsage=usageModel.get('primaryUsage');var thresholdValue=usageModel.get('usageThreshold');var usageData=usageModel.getUsageById(primaryUsage);if(!usageData){Caniuse.config.primary_usage.setValueToDefault();primaryUsage=Caniuse.config.primary_usage.value;usageData=usageModel.getUsageById(primaryUsage)}
var browserData=usageData.dataByBrowser[this.browserModel.id];var versionUsage=0;if(browserData&&this.id in browserData){versionUsage=browserData[this.id]}
this.primaryUsage=versionUsage;var pastThreshold=versionUsage>thresholdValue;this.set('isShown',pastThreshold)},getMissingUsage:function(){if(this.get('isShown')||this.era>=0){return 0}else{return this.primaryUsage}}});var FeatureListModel=(function(){var _this=this;var versionLists=null;var FeatureListModel=Stapes.subclass({constructor:function(processedData,browserListModel){var supportData=processedData.rawSupport;this.filtered=!1;this.featuresById=null;this.ecmaFeatures=processedData.ecmaFeatures;this.commonSearchFeatures=processedData.commonSearchFeatures;this.browserListModel=browserListModel;this.getSettingsFromConfig();this.makeFeatures(supportData);this.applyCurrentFilters();this.ecmaResults=[];this.commonSearchResults=[];this.on('change',this.applyFilterFromChange)},applyFilterFromChange:function(key){var value=this.get(key);switch(key){case 'search':this.filterBySearch(value);break;case 'feat':this.filterByFeatures(value);break;case 'cats':case 'statuses':this.filterByOthers();break;default:break}
this.filtered=!0},initialDisplay:function(){if(!this.filtered){this.emit('listChanged')}},updateBrowsers:function(browserIdArr){this.browserListModel.set('shownBrowsers',browserIdArr)},applyBrowserSet:function(browserSet){this.browserListModel.filterByBrowserSet(browserSet)},makeFeatures:function(supportData){var featuresById={};for(var featId in supportData){var featureData=supportData[featId];featureData.id=featId;var featureModel=new FeatureModel(featureData,this);featuresById[featId]=featureModel}
this.featuresById=featuresById},getSettingsFromConfig:function(){var config=Caniuse.config;var feat=config.feat.value;this.set('feat',statuses);var search=config.search.value;this.set('search',search);var cats=config.cats.value;this.set('cats',cats);var statuses=config.statuses.value;this.set('statuses',statuses)},searchFeatures:function(lowerQuery){var queryLength=lowerQuery.length;var showAll=!lowerQuery;var featuresById=this.featuresById;for(var featId in featuresById){var feature=featuresById[featId];var include;if(showAll){include=!0}else{include=feature.testValue('search',lowerQuery);if(include){this.foundCount++}}
feature.set('isShown',include)}},searchEcmaFeatures:function(lowerQuery){var queryLength=lowerQuery.length;this.ecmaResults=[];for(var esVersion in this.ecmaFeatures){var esData=this.ecmaFeatures[esVersion];var esUrl=esData.url;var esIds=esData.ids;for(var i=0;i<esIds.length;i++){var esId=esIds[i].toLowerCase();if(queryLength>=3&&esId.indexOf(lowerQuery)>-1){this.foundCount++;var esName=esIds[i];var esHash=esName.replace(/ /g,'_').replace(/"|:/g,'');this.ecmaResults.push({url:esUrl+'#test-'+esHash,feature:esName,version:esVersion})}}}},searchCommonSearchFeatures:function(lowerQuery){this.commonSearchResults=[];var commonSearchData=this.commonSearchFeatures;for(var i=0;i<commonSearchData.length;i++){var item=commonSearchData[i];if(item.searchableContent.indexOf(lowerQuery)>-1){this.foundCount++;this.commonSearchResults.push(item)}else if(item.list&&item.type==='css-property'){for(var j=0;j<item.list.length;j++){var prop=item.list[j];if(prop.indexOf('(')===-1){continue}
prop=prop.replace(/ /g,'').replace('(',': ?(');if((new RegExp(prop)).test(lowerQuery)){this.foundCount++;this.commonSearchResults.push(item)}}}}},filterBySearch:function(searchQuery){this.set('currentFilter','search');var showAll=!searchQuery.length;var lowerQuery=searchQuery.toLowerCase();this.foundCount=0;this.searchFeatures(lowerQuery);if(searchQuery.length){this.searchEcmaFeatures(lowerQuery);this.searchCommonSearchFeatures(lowerQuery)}
this.emit('listChanged');if(!showAll){Caniuse.mediator.publish('listFilteredBySearch',{amount:this.foundCount})}},filterByFeatures:function(featureIds){var showAll=!featureIds.length;this.set('currentFilter','feat');var featuresById=this.featuresById;for(var featId in featuresById){var feature=featuresById[featId];var include;if(showAll){include=!0}else{include=(featureIds.indexOf(featId)>-1)}
feature.set('isShown',include)}
this.emit('listChanged')},filterByOthers:function(){this.set('currentFilter','other');var categories=this.get('cats');var statuses=this.get('statuses');var featuresById=this.featuresById;for(var featId in featuresById){var feature=featuresById[featId];var matchesCategories=feature.testValue('cats',categories);var matchesStatuses=feature.testValue('statuses',statuses);var include=(matchesCategories&&matchesStatuses);feature.set('isShown',include)}
this.emit('listChanged')},applyCurrentFilters:function(){var featuresById=this.featuresById;var searchQuery=this.get('search');var featureIds=this.get('feat');var displayedFeatures=[];if(searchQuery&&searchQuery.length){this.filterBySearch(searchQuery)}else if(featureIds){this.filterByFeatures(featureIds)}else{this.filterByOthers()}
this.set('displayedFeatures',displayedFeatures)},sort:function(){}});return FeatureListModel}());var OptionTagsView=Stapes.subclass({constructor:function(){var _this=this;this.el=makeElem('div',{'class':'option-tags'});this.tagsById={};Caniuse.mediator.subscribe('configChanged',function(data){var optionId=data.option;var values=data.values;_this.updateTags(optionId,values)})},installTo:function(parent){Dom.prepend(parent,this.el)},makeTag:function(configId,label){var _this=this;var tagButton=makeElem('button',{'class':'option-tag__button',title:'Remove filter'},'x',{click:function(evt){evt.preventDefault();Caniuse.config[configId].setValueToDefault()}});var tagLabel=makeElem('span',{'class':'option-tag__label'});var tag=makeElem('div',{'class':'option-tag'},[tagButton,tagLabel]);tagLabel.innerHTML=label;this.el.appendChild(tag);this.tagsById[configId]=tag},makeFeaturesTag:function(valueArr){if(!valueArr.length){return}
var featureText=[];var featuresById=featureList.featuresById;for(var i=0;i<valueArr.length;i++){var id=valueArr[i];var feature=featuresById[id];featureText.push(feature.title)}
var label='Feature: '+featureText.join(', ');this.makeTag('feat',label)},makeCategoriesTag:function(valueArr){if(!valueArr.length){return}
var categoryText=[];for(var i=0;i<valueArr.length;i++){var id=valueArr[i];categoryText.push(id)}
var label='Categories: '+categoryText.join(', ');this.makeTag('cats',label)},makeStatusesTag:function(valueArr){if(!valueArr.length){return}
var statusesText=[];for(var i=0;i<valueArr.length;i++){var id=valueArr[i];statusesText.push(id)}
var label='Statuses: '+statusesText.join(', ').toUpperCase();this.makeTag('statuses',label)},updateTags:function(type,values){var tag=this.tagsById[type];if(tag){Dom.remove(tag)}
if(Caniuse.config[type].matchesDefault()){return}
switch(type){case 'feat':this.makeFeaturesTag(values);break;case 'cats':this.makeCategoriesTag(values);break;case 'statuses':this.makeStatusesTag(values);break}}});var FeatureListView=(function(){var DISPLAYED_FEATURE_COUNT=5;var primaryUsageId=null;var partialRatio=SupportLevelValue.PARTIALLY_SUPPORTED.amount;var searchQuery=null;var sortFunctionsById={'pubdate':function(a,b){return a.model.sourceData.pubDate<b.model.sourceData.pubDate?1:-1},'usr_score':function(a,b){var aData=a.model.featureUsageModel.usageSetsById[primaryUsageId].all;var aTotal=aData.y+(aData.a*partialRatio);var bData=b.model.featureUsageModel.usageSetsById[primaryUsageId].all;var bTotal=bData.y+(bData.a*partialRatio);return aTotal>=bTotal?-1:1},'rusr_score':function(a,b){var aData=a.model.featureUsageModel.usageSetsById[primaryUsageId].all;var aTotal=aData.y+(aData.a*partialRatio);var bData=b.model.featureUsageModel.usageSetsById[primaryUsageId].all;var bTotal=bData.y+(bData.a*partialRatio);return aTotal>bTotal?1:-1},'score':function(a,b){return a.model.supportScore>b.model.supportScore?-1:1},'rscore':function(a,b){return a.model.supportScore>b.model.supportScore?1:-1},'alpha':function(a,b){return a.model.sourceData.title.toLowerCase()>b.model.sourceData.title.toLowerCase()?1:-1},'ralpha':function(a,b){return a.model.sourceData.title.toLowerCase()>b.model.sourceData.title.toLowerCase()?-1:1},'search':function(a,b){var titleA=a.model.sourceData.title.toLowerCase();var titleB=b.model.sourceData.title.toLowerCase();var titleAIndex=titleA.indexOf(searchQuery);var titleBIndex=titleB.indexOf(searchQuery);if(titleAIndex>-1&&titleBIndex>-1){if(titleAIndex===titleBIndex){return titleA<titleB?-1:1}else{return titleAIndex<titleBIndex?-1:1}}
if(titleAIndex>-1){return-1}
if(titleBIndex>-1){return 1}
return 1}};var FeatureListView=Stapes.subclass({constructor:function(model,summaryView){this.featureViewsById={};this.featureViewList=[];this.overflowViews=[];this.summaryView=summaryView;var _this=this;this.model=model;this.nextLeftElem=null;this.totalLeftElem=null;this.el=makeElem(null);var featuresById=model.featuresById;for(var featId in featuresById){var featureModel=featuresById[featId];var featureView=new FeatureView(featureModel,this);this.featureViewsById[featId]=featureView;this.featureViewList.push(featureView)}
model.on('listChanged',this.updateList,this);model.on('change:sortOrder',this.updateList,this);usageModel.on('change:primaryUsage',this.handlePrimaryUsageChange,this)},installTo:function(parent){parent.appendChild(this.el);this.el=parent},handlePrimaryUsageChange:function(){var sortId=Caniuse.config.feature_sort.value;switch(sortId){case 'usr_score':case 'rusr_score':this.updateList();break}},sortList:function(){var sortId=Caniuse.config.feature_sort.value;var list=this.featureViewList;primaryUsageId=Caniuse.config.primary_usage.value;var filterType=this.model.get('currentFilter');var sortFunc;searchQuery=this.model.get('search').toLowerCase();if(filterType==='search'&&searchQuery.length>0){sortFunc=sortFunctionsById.search}else{sortFunc=sortFunctionsById[sortId]}
list.sort(sortFunc)},addEcmaFeatures:function(){var ecmaList=this.model.ecmaResults;var el=this.el;for(var i=0;i<ecmaList.length;i++){var item=ecmaList[i];var itemEl=makeElem('div',{'class':'feature-block  feature-block--ecma'},['See support for ',makeElem('a',{href:item.url},item.feature),' ('+item.version+')']);el.appendChild(itemEl)}},addCommonSearchFeatures:function(){var list=this.model.commonSearchResults;var el=this.el;function getLinkElems(item){var links=item.links;if(!links||!links.length){return[]}
var linkParent=makeElem('ul',{'class':'common-search-item__links'});for(var j=0;j<links.length;j++){var link=links[j];linkParent.appendChild(makeElem('li',null,[makeElem('a',{href:link.url},[link.title])]))}
return[makeElem('p',null,['For more information see:']),linkParent]}
function getListElems(item,size){size=size||'medium';var list=item.list;var query=featureList.get('search').toLowerCase();var values=[];if(!list){return{elData:null,values:[]}}
var listParent=makeElem('ul',{'class':'common-search-item__list  common-search-item__list--'+size});for(var j=0;j<list.length;j++){var liText=list[j];if(query.length&&liText.toLowerCase().indexOf(query)===0){values.push(liText);liText=makeElem('mark',null,[liText])}
listParent.appendChild(makeElem('li',null,[liText]))}
return{elData:[makeElem('p',null,['Includes the following:']),listParent],values:values}}
function addItem(item){var type=null;var descriptionItems=null;var title;var columnSize='';switch(item.type){case 'JavaScript library':case 'framework':descriptionItems=['This '+item.type+' is not part of any web browser, so support is not listed here.'];break;case 'css-property':columnSize='large';type='CSS property';break;case 'dom-property':columnSize='medium';type='DOM property or method';break;case 'html-element':columnSize='small';type='HTML element';break;case 'obsolete-html-element':columnSize='small';type='obsolete HTML elements';descriptionItems=['These elements/tags are obsolete and ',makeElem('span',{'class':'verdict  verdict--no'},['should not be used']),'. Because of this, browser support is not tracked.'];break;default:type=item.type||'';break}
var start=item.start||'This '+type+' is';if(item.description){descriptionItems=[]}else if(!descriptionItems){if(item.supported===!1){descriptionItems=[start+' ',makeElem('span',{'class':'verdict  verdict--no'},['not supported']),' in any modern browser, nor are there any known plans to support it.']}else{descriptionItems=[start+' ',makeElem('span',{'class':'verdict'},['supported']),' in effectively all browsers (since IE6+, Firefox 2+, Chrome 1+ etc)']}}
var titleEl=makeElem('h3',{'class':'feature-title'});var descriptionEl=makeElem('div',{'class':'common-search-item__description'},descriptionItems);if(item.description){descriptionEl.innerHTML=parseText(item.description)}
var itemContents=[titleEl,descriptionEl];var listData=getListElems(item,columnSize);if(listData.elData){itemContents=itemContents.concat(listData.elData)}
itemContents=itemContents.concat(getLinkElems(item));if(listData.values.length===1){title=item.title+': '+listData.values[0]}else{title=item.title}
titleEl.innerHTML=parseText(title);var itemEl=makeElem('div',{'class':'feature-block  feature-block--common-search'},itemContents);el.appendChild(itemEl)}
for(var i=0;i<list.length;i++){addItem(list[i])}},updateList:function(){Dom.empty(this.el);var overflow=this.overflowViews=[];this.sortList();var list=this.featureViewList;var el=this.el;var displayedCount=0;for(var i=0;i<list.length;i++){var view=list[i];var shown=view.model.get('isShown');if(shown){if(displayedCount<DISPLAYED_FEATURE_COUNT){view.render(el);displayedCount++}else{overflow.push(view)}}else{view.destroy()}}
this.addEcmaFeatures();this.addCommonSearchFeatures();if(overflow.length>0){this.addOverflowButtons(overflow.length)}
if(displayedCount>1){el.appendChild(this.summaryView.el)}else{if(this.summaryView.el.parentNode){Dom.remove(this.summaryView.el)}}},showMore:function(){this.addOverflow(DISPLAYED_FEATURE_COUNT)},showAll:function(){this.addOverflow(this.overflowViews.length)},addOverflow:function(amount){var overflow=this.overflowViews;var i=0;while(overflow.length&&i<amount){var view=overflow[0];view.render(this.el);overflow.shift();i++}
if(overflow.length>0){this.addOverflowButtons(overflow.length)}else{Dom.remove(this.buttonContainer)}
if(this.summaryView.el.parentNode){this.el.appendChild(this.summaryView.el)}},addOverflowButtons:function(amountLeft){var _this=this;var nextAmount=Math.min(amountLeft,DISPLAYED_FEATURE_COUNT);this.buttonContainer=makeElem('div',{'class':'overflow-button-container'});if(!this.showMoreButton||!this.showAllButton){this.nextLeftElem=makeElem('span',{'class':'amount-left'},nextAmount);this.totalLeftElem=makeElem('span',{'class':'total-left'},amountLeft);this.showMoreButton=makeElem('button',{'class':'ciu-button  ciu-button--invert  show-more-button'},['Show next ',this.nextLeftElem],{'click':function(){_this.showMore.call(_this)}});this.showAllButton=makeElem('button',{'class':'ciu-button  ciu-button--invert  show-all-button'},['Show all ',this.totalLeftElem],{'click':function(){_this.showAll.call(_this)}})}else{this.nextLeftElem.innerHTML=nextAmount;this.totalLeftElem.innerHTML=amountLeft}
this.buttonContainer.appendChild(this.showMoreButton);if(nextAmount==amountLeft){Dom.remove(this.showAllButton)}else{this.buttonContainer.appendChild(this.showAllButton)}
this.el.appendChild(this.buttonContainer)}});return FeatureListView}());var FeatureUsageModel=Stapes.subclass({constructor:function(featureModel){this.featureModel=featureModel;this.maxId='all';this.update();usageModel.on('usageAdded',this.addUsage,this);usageModel.on('usageRemoved',this.removeUsage,this)},setMax:function(id){this.maxId=id;this.update()},update:function(){this.usageSetsById={};this.addFoundUsage()},addFoundUsage:function(){var usageById=usageModel.dataById;for(var id in usageById){var usageData=usageById[id];this.addUsage(usageData)}},addUsage:function(usageData){var setForFeature=new UsageSet(usageData.uid,usageData.name);this.usageSetsById[usageData.uid]=setForFeature;var allUsage=usageData.dataByBrowser;var usageId=usageData.uid;var usageName=usageData.name;var byBrowser=this.featureModel.supportDataByBrowser;var customMax=this.maxId!=='all';var max=100;var browserType;var browserSet;switch(this.maxId){case 'tracked':max=usageModel.getTotalForBrowserType(usageId,'desktop')+usageModel.getTotalForBrowserType(usageId,'mobile');break
case 'tracked|desktop':browserType='desktop';break
case 'tracked|mobile':browserType='mobile';break
default:var browsersetPrefix='browserset|';if(this.maxId.indexOf(browsersetPrefix)===0){browserSet=this.maxId.substr(browsersetPrefix.length);max=usageModel.getTotalForBrowserSet(usageId,browserSet)}}
if(browserType){max=usageModel.getTotalForBrowserType(usageId,browserType)}
for(var browserId in byBrowser){var dataByVersion=byBrowser[browserId];var browserData=Caniuse.data.browsers[browserId];if(browserType&&browserType!==browserData.type){continue}else if(browserSet){var browserModel=browserListModel.browsersById[browserId];var inSet=browserModel.browserSetState[browserSet];if(!inSet){continue}}
var currentVersion=browserData.current_version;for(var versionId in dataByVersion){if(browserSet){var versionModel=browserModel.versionsById[versionId];if(!versionModel.browserSetState[browserSet]){continue}}
var item=dataByVersion[versionId];var supportValue=item.supportValue;switch(supportValue.supportLevel){case SupportLevelValue.PARTIALLY_SUPPORTED:case SupportLevelValue.SUPPORTED:var browserUsage=allUsage[browserId];if(!browserUsage){continue}
var versionUsage=0;if(versionId in browserUsage){versionUsage=browserUsage[versionId]}else if('0' in browserUsage&&versionId==currentVersion){versionUsage=browserUsage['0']}
versionUsage=(versionUsage/max)*100;if(!versionUsage){continue}
var letter=supportValue.supportLevel.letter;setForFeature.all[letter]+=versionUsage;if(!supportValue.isPrefixed){setForFeature.unprefixed[letter]+=versionUsage}}}}
this.emit('featureUsageAdded',setForFeature)},removeUsage:function(usageData){var setForFeature=this.usageSetsById[usageData.uid];delete this.usageSetsById[usageData.uid];this.emit('featureUsageRemoved',setForFeature)}});var FeatureModel=(function(){var FeatureModel=Stapes.subclass({constructor:function(featureData,featureListModel){this.id=featureData.id;this.title=featureData.title;this.featureListModel=featureListModel;this.sourceData=featureData;this.hasPrefixes=!1;this.prefixType=null;this.featureUsageModel=null;this.supportScore=0;this.versionsByNoteNumber={};this.versionFeatureArr=[];this.supportDataByBrowser=null;this.set('viewMode',ViewMode.NORMAL);this.makeSupportDataByBrowser();this.makeFeatureUsageModel();this.prefixType=this.getPrefixType()},makeFeatureUsageModel:function(){this.featureUsageModel=new FeatureUsageModel(this)},getPrefixType:function(){if(!this.hasPrefixes){return null}
var sourceData=this.sourceData;if(sourceData.baseCategories.indexOf("CSS")>-1){return 'css'}else if(sourceData.ucprefix){return 'js-upper'}else{return 'js-lower'}},makeSupportDataByBrowser:function(){var statsByBrowser=this.sourceData.stats;var supportDataByBrowser={};for(var browserId in statsByBrowser){var supportStringByVersion=statsByBrowser[browserId];var dataByVersion=this.processRawVersions(supportStringByVersion,browserId);supportDataByBrowser[browserId]=dataByVersion}
this.supportDataByBrowser=supportDataByBrowser},processRawVersions:function(supportStringByVersion,browserId){var supportByVersion={};var versionFeatureArr=this.versionFeatureArr;for(var versionId in supportStringByVersion){var supportString=supportStringByVersion[versionId];var supportValue=this.getSupportValue(supportString);this.supportScore+=supportValue.supportLevel.amount;if(supportValue.noteNumbers.length){this.updateNoteData(supportValue.noteNumbers,browserId,versionId)}
if(supportValue.isPrefixed){this.hasPrefixes=!0}
var versionFeatureData={supportValue:supportValue,usageData:{'region.global':0}};supportByVersion[versionId]=versionFeatureData;versionFeatureArr.push(versionFeatureData)}
return supportByVersion},getSupportValue:function(supportString){var supportValue=supportValueMap[supportString];if(!supportValue){supportValue=new SupportValue(supportString);supportValueMap[supportString]=supportValue}
return supportValue},updateNoteData:function(noteNumbers,browserId,versionId){var versionsByNoteNumber=this.versionsByNoteNumber;for(var i=0;i<noteNumbers.length;i++){var num=noteNumbers[i];var browserVersion=[browserId,versionId];if(!versionsByNoteNumber[num]){versionsByNoteNumber[num]=[browserVersion]}else{versionsByNoteNumber[num].push(browserVersion)}}},selectNote:function(num){this.emit('noteSelected',num)},unSelectNote:function(num){this.emit('noteUnSelected',num)},selectVersion:function(versionSupportView){this.isSelected=!0;this.emit('versionSelected',versionSupportView)},unSelectVersion:function(versionSupportView){this.isSelected=!1;this.emit('versionUnSelected',versionSupportView)},testValue:function(property,filterVals){var result=null;var sourceData=this.sourceData;switch(property){case "search":var query=filterVals;var haystack=sourceData.searchableContent;var cleanQuery=query.toLowerCase().replace(/^(-?(o|ms|moz|webkit)+-)/,'').replace(/:\s+/g,':').replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&');var regexp=new RegExp('^'+cleanQuery+'|[^a-zA-Z]'+cleanQuery);result=(regexp.exec(haystack)!==null);break;case "cats":var curVals=sourceData.baseCategories;var arr=Caniuse.Utils.getIntersect(curVals,filterVals);result=arr.length?!0:!1;break;case "statuses":var curVal=sourceData.status;result=(filterVals.indexOf(curVal)>-1);break;default:throw new Error('Unexpected test value: '+property)}
return result},display:function(){this.set('isDisplayed',!0)}});return FeatureModel}());var FeatureUsageView=Stapes.subclass({constructor:function(model){this.model=model;this.featureModel=model.featureModel;this.allUsageShown=!1;this.elMap={};this.MIN_VISIBLE=4;this.usageSetParent=null;this.makeEl();model.on('featureUsageAdded',function(usageSet){var setById={};setById[usageSet.id]=usageSet;this.makeUsageSets(setById);this.updateVisibility()},this);model.on('featureUsageRemoved',function(usageSet){var elems=this.elMap[usageSet.id];delete this.elMap[usageSet.id];Dom.remove(elems);this.updateVisibility()},this);usageModel.on('change:primaryUsage',this.setPrimaryUsage,this);Caniuse.mediator.subscribe('browserSetsChanged',function(){this.updateOptions()}.bind(this))},setPrimaryUsage:function(usageId){usageId=usageId||Caniuse.config.primary_usage.value;var elSet=this.elMap[usageId];for(var i=elSet.length-1;i>=0;i--){Dom.prepend(this.usageSetParent,elSet[i])}
this.updateVisibility()},updateVisibility:function(){var children=this.usageSetParent.childNodes;var allShown=this.allUsageShown;for(var i=0;i<children.length;i++){var child=children[i];if(allShown||i<this.MIN_VISIBLE){Dom.show(child)}else{Dom.hide(child)}}},makeUsageEl:function(usageSet,type,usageId){var title=usageSet.shortName||usageSet.name;if(this.featureModel.hasPrefixes){}
if(type=='unprefixed'){title=type+":"}
var data=usageSet[type];var supportPerc=percFormat(data.y);var partialPerc=percFormat(data.a);var totalPerc=percFormat(data.a+data.y);var unknownPerc=usageModel.getUsageById(usageId).unknownPerc;if(unknownPerc){unknownPerc=percFormat(unknownPerc)}
var supportedTitle=supportPerc+'% Supported';var totalTitle=totalPerc+'% Total';if(unknownPerc){var suffix=' ('+unknownPerc+'% untracked browsers)';if(partialPerc>0){totalTitle+=suffix}else{supportedTitle+=suffix}}
var children=[makeElem('h4',null,[makeElem('span',{'class':'usage-title'},title)]),makeElem('span',{'class':'support',title:supportedTitle},supportPerc+'%')];if(partialPerc>0){children.push(makeElem('span',null,' + '));children.push(makeElem('span',{'class':'partial',title:'Partially Supported'},partialPerc+'%'));children.push(makeElem('span',null,' = '));children.push(makeElem('span',{'class':'total',title:totalTitle},totalPerc+'%'))}
var el=makeElem('li',{'class':'support-stats','data-usage-id':usageId},children);if(type=='unprefixed'){el.classList.add('support-stats--unprefixed')}
return el},makeUsageSets:function(usageSets){var parent=this.usageSetParent;var typeIds=['all'];if(this.featureModel.hasPrefixes){typeIds.push('unprefixed')}
for(var usageId in usageSets){var data=usageSets[usageId];if(!data){continue}
var elSet=this.elMap[usageId]=[];for(var j=0;j<typeIds.length;j++){var typeId=typeIds[j];var usageEl=this.makeUsageEl(data,typeId,usageId);elSet.push(usageEl);parent.appendChild(usageEl)}}
this.setPrimaryUsage()},handleMaxListChange:function(evt){var val=evt.target.value;this.model.setMax(val);Dom.empty(this.usageSetParent);this.makeUsageSets(this.model.usageSetsById)},updateOptions:function(){var options=[makeElem('option',{value:'all'},'all users'),makeElem('option',{value:'tracked'},'all tracked'),makeElem('option',{value:'tracked|desktop'},'tracked desktop'),makeElem('option',{value:'tracked|mobile'},'tracked mobile'),];Caniuse.browserSets.forEach(function(set){options.push(makeElem('option',{value:'browserset|'+set.name},set.name))})
Dom.empty(this.usageMaxList);options.forEach(function(option){this.usageMaxList.appendChild(option)}.bind(this))},makeEl:function(){var _this=this;this.el=makeElem('aside',{'class':'usage-container'});this.usageMaxList=makeElem('select',{},[],{change:this.handleMaxListChange.bind(this),input:this.handleMaxListChange.bind(this)});var selectWrap=makeElem('div',{'class':'select'},[this.usageMaxList]);this.updateOptions();this.usageHeader=makeElem('header',{'class':'usage-header'},['Usage',makeElem('label',{},['% of ',selectWrap])]);this.el.appendChild(this.usageHeader);this.usageSetParent=makeElem('ul');this.el.appendChild(this.usageSetParent);this.makeUsageSets(this.model.usageSetsById);this.updateVisibility();this.addShowButton()},addShowButton:function(){var _this=this;var children=this.usageSetParent.childNodes;if(children.length>this.MIN_VISIBLE){var showButton=makeElem('button',{'class':'ciu-button ciu-button--small show-more-usage'},'show more...',{click:function(){for(var i=0;i<children.length;i++){Dom.show(children[i])}
Dom.remove(showButton);_this.allUsageShown=!0}});this.el.appendChild(showButton)}}});var FeatureView=(function(){var makeTabPanelNotice=function(text){return makeElem('p',null,[makeElem('span',{'class':'note'},text)])};var TabManager=function(parent){var elem=makeElem;this.tabContainer=elem('div',{'class':'feature-tab-container'},[elem('ul')]);this.panelContainer=elem('div',{'class':'feature-panel-container'});this.haveFirst=!1;var processingElement=elem('div',null,['Loading...']);parent.appendChild(this.tabContainer);parent.appendChild(this.panelContainer);this.panelSets={};this.add=function(id,label,panelElement,ajaxData){if(this.panelSets[id]){throw new Error('Panel already defined')}
var _this=this;var tab=elem('li',{'class':'feature-tab'},[label]);var panel=elem('div',{'class':'hidden'},[panelElement]);Dom.listen(tab,'click',function(){_this.showPanel(id);var isEmpty=!panelElement.firstChild;if(isEmpty&&ajaxData){panelElement.appendChild(processingElement);Caniuse.Utils.ajax(ajaxData.url,{success:function(output){Dom.empty(panelElement);var data=JSON.parse(output);ajaxData.success.call(_this,data)},error:ajaxData.error})}});this.panelSets[id]={tab:tab,panel:panel};this.tabContainer.firstChild.appendChild(tab);this.panelContainer.appendChild(panel);if(!_this.haveFirst){_this.showPanel(id);_this.haveFirst=!0}};this.addLink=function(title,url){var link=elem('a',{href:url,target:'_blank','class':'feature-tab-link'},title);this.tabContainer.appendChild(link)};this.showPanel=function(selectedPanelId){for(var panelId in this.panelSets){var theSet=this.panelSets[panelId];if(panelId===selectedPanelId){Dom.show(theSet.panel);theSet.tab.classList.add('active')}else{Dom.hide(theSet.panel);theSet.tab.classList.remove('active')}}}};var FeatureView=Stapes.subclass({constructor:function(model,listView){var _this=this;this.model=model;this.listView=listView;this.set('isGenerated',!1);this.isDisplayed=!1;this.usageContainer=null;this.supportView=null;this.noteNumberElementsByVersions=null;this.el=makeElem('article',{'class':'feature-block  feature-block--feature'});this.HIGHLIGHT_CLASS='highlight';model.on('versionSelected',this.handleVersionSelection,this);model.on('versionUnSelected',this.handleVersionUnSelection,this);model.on('change:viewMode',this.handleViewModeChange,this)},render:function(parentEl){this.isDisplayed=!0;if(this.get('isGenerated')){parentEl.appendChild(this.el);return}
this.makeHeading();this.makeUsageViewSets();this.makeViewModeControl();this.makeShowAllVersionsButton();this.makeSupportView();this.makeTabs();parentEl.appendChild(this.el);this.set('isGenerated',!0)},destroy:function(){this.isDisplayed=!1},makeHeading:function(){var headingContainer;var data=this.model.sourceData;var elem=makeElem;var descriptionEl=elem('p',{'class':'feature-description'});descriptionEl.innerHTML=parseText(data.description);var permaLink=elem('a',{href:'#feat='+this.model.id,title:'Link to just this feature','class':'feature__permalink-symbol'},'#');headingContainer=elem('div',{'class':'feature-heading'},[elem('h3',{'class':'feature-title'},data.title),elem('a',{href:data.spec,'class':'specification '+data.status},[elem('i',{'class':'icon icon-spec'}),' - '+data.status.toUpperCase()]),descriptionEl]);this.el.appendChild(permaLink);this.el.appendChild(headingContainer)},makeUsageViewSets:function(){this.usageView=new FeatureUsageView(this.model.featureUsageModel);this.el.appendChild(this.usageView.el)},updateNotesToShow:function(notesToShow){if(!this.noteElementsByNumber){this._notesToShow=notesToShow;return}
for(var num in this.noteElementsByNumber){var el=this.noteElementsByNumber[num];var showNote=(notesToShow.indexOf(num)>-1);Dom.toggleClass(el,'note-not-applicable',!showNote)}},updateUsageOrder:function(){if(!this.usageContainer){return}
var i;var selectedUsage=Caniuse.config.primary_usage.value;var container=this.usageContainer.querySelector('ul');var childNodes=container.childNodes;var selected=[];if(!this.allUsageShown){Dom.hide(childNodes[0])}
for(i=0;i<childNodes.length;i++){var child=childNodes[i];var id=child.getAttribute('data-usage-id');if(id==selectedUsage){selected.push(child)}}
if(!selected.length){var data=this.model.usageSetsById[selectedUsage];var typeIds=['all'];if(this.model.hasPrefixes){typeIds.push('unprefixed')}
for(i=0;i<typeIds.length;i++){var typeId=typeIds[i];selected.push(this.makeUsageView(data,typeId,selectedUsage))}}
for(i=0;i<selected.length;i++){var elem=selected[i];container.insertBefore(elem,container.firstChild);Dom.show(elem)}},makeViewModeControl:function(){var _this=this;var buttons;var buttonClick=function(evt){var mode=evt.target.getAttribute('data-view-mode');_this.model.set('viewMode',mode);for(var i=0;i<buttons.length;i++){var button=buttons[i];if(button==evt.target){button.classList.add('selected')}else{button.classList.remove('selected')}}}.bind(this);var viewModeControlContainer=makeElem('div',{'class':'view-mode-control'},[makeElem('button',{'class':'view-mode-button selected','data-view-mode':ViewMode.NORMAL,'title':'View mode: Aligned to "current" browsers'},'Current aligned',{click:buttonClick}),makeElem('button',{'class':'view-mode-button','data-view-mode':ViewMode.USAGE_RELATIVE,'title':'View mode: Usage relative'},'Usage relative',{click:buttonClick}),makeElem('button',{'class':'view-mode-button','data-view-mode':ViewMode.DATE_RELATIVE,'title':'View mode: Date relative'},'Date relative',{click:buttonClick})]);buttons=viewModeControlContainer.childNodes;this.viewModeControlContainer=viewModeControlContainer;this.el.appendChild(viewModeControlContainer)},handleViewModeChange:function(mode){if(mode===ViewMode.USAGE_RELATIVE&&!Caniuse.config.primary_browserset.value.length){this.showAllForFeat()}},makeShowAllVersionsButton:function(){var button=makeElem('button',{'class':'ciu-button  show-all-versions-button','title':'Show all data for this feature'},'Show all',{click:this.showAllForFeat.bind(this)});this.viewModeControlContainer.appendChild(button);this.showAllVersionsButton=button},showAllForFeat:function(){this.supportView.forceShowAll()},makeSupportView:function(){this.supportView=new FeatureSupportView(this.model,featureList,this);var wrapperEl=makeElem('div',{'class':'support-container-wrap'},null,{'scroll':this.supportView.handleInnerScroll.bind(this.supportView)});wrapperEl.appendChild(this.supportView.el);this.el.appendChild(wrapperEl);this.supportView.setViewMode(ViewMode.NORMAL)},selectNote:function(){},toggleNoteHighlight:function(noteNums,show){for(var i=0;i<noteNums.length;i++){var num=noteNums[i];var noteElem=this.noteElementsByNumber[num];Dom.toggleClass(noteElem,this.HIGHLIGHT_CLASS,show)}},handleVersionSelection:function(versionSupportView){this.toggleNoteHighlight(versionSupportView.supportValue.noteNumbers,!0)},handleVersionUnSelection:function(versionSupportView){this.toggleNoteHighlight(versionSupportView.supportValue.noteNumbers,!1)},makeLinksPanel:function(tabManager){var sourceData=this.model.sourceData;var linksElem=makeElem('div');var linkCount=sourceData.link_count+1;tabManager.add('links','Resources ('+linkCount+')',linksElem,{url:'/process/get_feat_data.php?feat='+this.model.id+'&type=links',success:function(linkArr){if(linkArr){var ul=makeElem('ul');for(var i=0;i<linkArr.length;i++){var item=linkArr[i];var link=makeElem('a',{href:item.url},item.title);var children=[makeElem('a',{href:item.url},item.title),' ['+item.url_host+'] '];for(var j=0;j<item.tags.length;j++){var elem=makeElem('span',{'class':'linktag'},item.tags[j]);children.push(elem)}
var li=makeElem('li',{'class':'feature-link-item'},children);ul.appendChild(li)}
linksElem.appendChild(ul)}else{linksElem.appendChild(makeTabPanelNotice('No known resources'))}}})},addNumberedNoteEl:function(num,notesByNum,versionList,notesParent){if(!notesByNum[num]){console.error('Missing note for #'+num+' on feature "'+this.model.id+'"');return}
var _this=this;var noteContent=parseText(notesByNum[num]);var numNote=makeElem('p',{'class':'num-note'});numNote.innerHTML='<span class="num-tag  num-tag--'+num+'">'+num+'</span> '+noteContent;var selectNote=(function(num){return function(evt){_this.model.selectNote(num)}}(num));var unSelectNote=(function(num){return function(evt){_this.model.unSelectNote(num)}}(num));Dom.listen(numNote,'mouseover',selectNote);Dom.listen(numNote,'mousedown',selectNote);Dom.listen(numNote,'mouseout',unSelectNote);Dom.listen(numNote,'mouseup',unSelectNote);this.noteElementsByNumber[num]=numNote;notesParent.appendChild(numNote)},makeNotesPanel:function(tabManager){var sourceData=this.model.sourceData;var notesParent=makeElem('div');var _this=this;this.noteElementsByNumber={};var versionsByNoteNumber=this.model.versionsByNoteNumber;if(versionsByNoteNumber){var notesByNum=sourceData.notes_by_num;for(var num in versionsByNoteNumber){this.addNumberedNoteEl(num,notesByNum,versionsByNoteNumber[num],notesParent)}}
var generalNotesHTML=sourceData.notes;if(generalNotesHTML){var generalNotesElem=makeElem('div');generalNotesElem.innerHTML=parseText(generalNotesHTML);notesParent.insertBefore(generalNotesElem,notesParent.firstChild)}
if(!notesParent.firstChild){notesParent.appendChild(makeTabPanelNotice('No notes'))}
tabManager.add('notes','Notes',notesParent);this.updateNotesToShow(this._notesToShow)},makeSubFeaturesPanel:function(tabManager){var sourceData=this.model.sourceData;var parentEl=makeElem('div');var childIds=sourceData.children;if(!childIds||!childIds.length){return}
var featuresById=this.model.featureListModel.featuresById;var list=makeElem('ul');for(var i=0;i<childIds.length;i++){var id=childIds[i];var title=featuresById[id].sourceData.title;var link=makeElem('a',{href:'#feat='+id},title);var item=makeElem('li',{'class':'feature-subfeature'},[link]);list.appendChild(item)}
parentEl.appendChild(list);tabManager.add('subfeatures','Sub-features ('+childIds.length+')',parentEl)},makeBugsPanel:function(tabManager){var sourceData=this.model.sourceData;var bugsElem=makeElem('div');var bugCount=sourceData.bug_count;var ajaxData;var showError=function(){var el=makeElem('p',null,'Error retrieving data');bugsElem.appendChild(el)};var processBugData=function(bugArr){if(!bugArr){showError();return}
var ol=makeElem('ol');for(var i=0;i<bugArr.length;i++){var li=makeElem('li',{'class':'feature-bug-item'});li.innerHTML=parseText(bugArr[i].description);ol.appendChild(li)}
bugsElem.appendChild(ol)};if(bugCount===0){ajaxData=null;bugsElem.appendChild(makeTabPanelNotice('No known issues'))}else{ajaxData={url:'/process/get_feat_data.php?feat='+this.model.id+'&type=bugs',success:processBugData,error:showError}}
tabManager.add('bugs','Known issues ('+bugCount+')',bugsElem,ajaxData)},makeFeedbackForm:function(tabManager){var _this=this;var introText='Send your comments, corrections, etc. '+'If you have a question you\'d like answered, please include an email address. Or, ';var url='https://github.com/Fyrd/caniuse/blob/master/features-json/'+this.model.id+'.json';var githubLink=makeElem('a',{href:url},'edit this data on GitHub');var commentField=makeElem('textarea',{'class':'feature__feedback-textarea',name:'comment',required:'required'});var feedbackForm=makeElem('form',null,[makeElem('p',null,[introText,githubLink]),commentField,makeElem('input',{type:'submit','class':'ciu-button',value:'Submit'})]);Dom.listen(feedbackForm,'submit',function(evt){evt.preventDefault();var commentValue=commentField.value;var dataStr='comment='+commentValue+'&feat_id='+_this.model.id;if(commentValue.trim().length===0){window.alert("Please enter a comment in the text field");commentField.focus();return}else{var messageElem=makeElem('p',{role:'alert'},'Submitting your feedback...');Dom.insertAfter(messageElem,commentField);Caniuse.Utils.ajax("/process/feat_comment.php",{method:'POST',data:dataStr,success:function(returnData){if(returnData==1){messageElem.innerHTML="Feedback sent!";commentField.value='';setTimeout(function(){Dom.remove(messageElem)},5000)}else{messageElem.innerHTML='Unable to send feedback. Try '+'<a href="http://a.deveria.com/contact">this form</a>'+' instead?'}}})}});tabManager.add('feedback','Feedback',feedbackForm)},makeTabs:function(){var tabManager=new TabManager(this.el);this.makeNotesPanel(tabManager);this.makeSubFeaturesPanel(tabManager);this.makeBugsPanel(tabManager);this.makeLinksPanel(tabManager);this.makeFeedbackForm(tabManager)},installTo:function(){}});return FeatureView}());var SummaryModel=Stapes.subclass({constructor:function(featureListModel,browserListModel){this.featureListModel=featureListModel;this.browserListModel=browserListModel;this.dataByBrowser={};this.shownCount=0;this.updateData();featureListModel.on('listChanged',this.updateData,this)},updateData:function(){var dataByBrowser=this.dataByBrowser={};var browsersById=this.browserListModel.browsersById;var featuresById=this.featureListModel.featuresById;this.shownCount=0;for(var featId in featuresById){var feature=featuresById[featId];if(!feature.get('isShown')){continue}
this.shownCount++;var supportData=feature.supportDataByBrowser;for(var browserId in browsersById){var browserModel=browsersById[browserId];var versionArray=browserModel.versionArray;if(!dataByBrowser[browserId]){dataByBrowser[browserId]={}}
for(var i=0;i<versionArray.length;i++){var versionModel=versionArray[i];var versionId=versionModel.id;var item=feature.supportDataByBrowser[browserId][versionId];if(!dataByBrowser[browserId][versionId]){dataByBrowser[browserId][versionId]=0}
if(supportData[browserId]&&supportData[browserId][versionId]){var supportItem=supportData[browserId][versionId].supportValue;var amount=supportItem.supportLevel.amount;dataByBrowser[browserId][versionId]+=amount}}}}
if(this.shownCount>0){this.emit('summaryChanged')}}});var BaseBrowserTableView=Stapes.subclass({getVisibleCurrentCell:function(){var currentEls=Caniuse.Utils.getElems('.current',this.el);for(var i=0;i<currentEls.length;i++){var width=currentEls[i].clientWidth;if(width>0){return currentEls[i]}}
return null},getSentinel:function(){var el=this.getVisibleCurrentCell();if(el){return{el:el,width:el.clientWidth}}else{return null}},_setMinWidth:function(){var views=this.browserSupportViewsById;var count=0;for(var id in views){if(views[id].isShown){count++}}
this.el.style.minWidth=(count*50)+'px'},updateHeaderPosition:function(){if(this.fixedHeader){this.toggleSupportViewFixed(!1)}
var yOffset=window.pageYOffset-document.documentElement.clientTop;var rect=this.el.getBoundingClientRect();var paddingTop=parseInt(window.getComputedStyle(this.el)['padding-top'],10);var currentRowRect=this.getVisibleCurrentCell().getBoundingClientRect();this.headerHeight=this.getHeaderHeight();this.topOffset=rect.top+paddingTop+yOffset;this.currentRowOffset=currentRowRect.top+yOffset-this.headerHeight;this.bottomOffset=rect.bottom+yOffset;if(this.fixedHeader){this.toggleSupportViewFixed(!0)}},toggleSupportViewFixed:function(isFixed){var newMargin='';if(isFixed){var marginTop=parseInt(window.getComputedStyle(this.el)['margin-top'],10);newMargin=marginTop+this.headerHeight+'px'}
this.el.style.marginTop=newMargin;for(var id in this.browserSupportViewsById){var view=this.browserSupportViewsById[id];view.toggleFixed(isFixed)}
Dom.toggleClass(this.el,'has-fixed-headers',isFixed)},positionHeader:function(forceUpdate){var minHeight=200;var scrollY=this.scrollY;var isFixed=(this.bottomOffset-this.topOffset)>minHeight&&this.topOffset<scrollY&&this.currentRowOffset>scrollY-this.headerHeight;if(!forceUpdate&&this.fixedHeader&&isFixed||!this.fixedHeader&&!isFixed){return}
if(forceUpdate&&isFixed){this.toggleSupportViewFixed(!1);this.fixedHeader=isFixed}
this.toggleSupportViewFixed(isFixed);this.fixedHeader=isFixed},_updateHeaderText:function(size){for(var id in this.browserSupportViewsById){var view=this.browserSupportViewsById[id];if(view.isShown){view.updateHeaderText(size)}}},handleCellSizeChange:function(){var listEl=this.el;var prefix='cell-size-';var step=16;var sentinel=this.getSentinel();if(!sentinel){return}
var classArr=[];var classList=listEl.classList;for(var i=0;i<classList.length;i++){var className=classList[i];if(className.indexOf(prefix)===0){classList.remove(className)}}
var size=Math.ceil(sentinel.width/step);var fullClassName=prefix+size;this._setMinWidth();classList.add(fullClassName);if(this.browserNotesEl){this.positionBrowserNotes()}
this._updateHeaderText(size);if(this.currentViewMode===ViewMode.NORMAL){this.updateHeaderPosition();this.positionHeader(!0)}}});var SummaryView=Stapes.subclass({constructor:function(summaryModel,browserListModel){this.el=makeElem('article',{'class':'feature-block  feature-block--feature'});this.makeHeading();this.makeSupportEl(summaryModel,browserListModel)},makeHeading:function(){var summaryDescription='Calculation of support for currently selected criteria';var headingContainer=makeElem('h3',{'class':'feature-title'},'Summary');var description=makeElem('p',{'class':'feature-description'},summaryDescription);this.el.appendChild(headingContainer);this.el.appendChild(description)},makeSupportEl:function(summaryModel,browserListModel){this.summaryTableView=new SummaryTableView(summaryModel,browserListModel);var wrapperEl=makeElem('div',{'class':'support-container-wrap '+ViewMode.NORMAL});wrapperEl.appendChild(this.summaryTableView.el);this.el.appendChild(wrapperEl)}});var SummaryTableView=BaseBrowserTableView.subclass({constructor:function(summaryModel,browserListModel){this.summaryModel=summaryModel;this.browserListModel=browserListModel;this.browserSupportViewsById=null;this.supportEl=null;this.el=makeElem('div',{'class':'support-container'});this.makeBrowserListViews();this.browserListModel.on('shownChange',this.handleShownChange,this);this.handleShownChange();mediator.subscribe('optionsToggled',this.handleCellSizeChange,this);Caniuse.Utils.Dom.listen(window,'resize',this.handleCellSizeChange,this);mediator.subscribe('scroll',this.handleScroll,this);mediator.subscribe("pageSectionDisplayed",function(pageId){if(pageId===PAGE_ID){this.handleCellSizeChange()}},this)},handleScroll:function(val){},handleShownChange:function(){var views=this.browserSupportViewsById;var maxHeight=0;var id,view;for(id in views){view=views[id];maxHeight=Math.max(maxHeight,view.getShownOldVersionCount())}
for(id in views){view=views[id];view.updateFiller(maxHeight)}},makeBrowserListViews:function(){var browsersById=this.browserListModel.browsersById;this.browserSupportViewsById={};for(var browserId in browsersById){var browserModel=browsersById[browserId];var view=new BrowserSummaryView(browserModel,this.summaryModel);this.browserSupportViewsById[browserId]=view;this.el.appendChild(view.el)}}});var FeatureSupportView=(function(){var FeatureSupportView=BaseBrowserTableView.subclass({constructor:function(featureModel,featureListModel,featureView){this.featureModel=featureModel;this.featureListModel=featureListModel;this.featureView=featureView;this.el=makeElem('div',{'class':'support-container'});this.viewMode=ViewMode.NORMAL;this.browserListModel=featureListModel.browserListModel;this.makeBrowserListViews();this.makeTooltipElement();this.makeBrowserNotesElement();this.handleShownChange();featureModel.on('change:viewMode',this.setViewMode,this);featureModel.on('versionSelected',this.handleVersionSelection,this);featureModel.on('versionUnSelected',this.handleVersionUnSelection,this);featureListModel.on('change:shownAgents',this.updateShownAgents,this);this.browserListModel.on('shownChange',this.handleShownChange,this);mediator.subscribe('optionsToggled',this.handleCellSizeChange,this);featureListModel.on('heightChange',this.handleHeightChange,this);Caniuse.Utils.Dom.listen(window,'resize',this.handleCellSizeChange,this);mediator.subscribe("pageSectionDisplayed",function(pageId){if(pageId===PAGE_ID){this.handleCellSizeChange()}},this);mediator.subscribe("escapeKey",function(){this.hideBrowserNotes()},this);featureView.on('change:isGenerated',function(){this.handleCellSizeChange()},this);mediator.subscribe('scroll',this.handleScroll,this)},handleInnerScroll:function(){this.updateHeaderPosition();this.positionHeader(!0)},handleScroll:function(scrollPosition){if(!this.featureView.isDisplayed){return}
if(this.currentViewMode===ViewMode.NORMAL){this.scrollY=window.pageYOffset;this.positionHeader()}},setDateRelativeHeight:function(){var height=0;var offset=50;for(var id in this.browserSupportViewsById){var view=this.browserSupportViewsById[id];var browserDatePoints=view.getBrowserDatePoints();if(browserDatePoints.top>height){height=browserDatePoints.top}
view.makeDateLine(browserDatePoints)}
this.el.style.height=height+offset+'px';if(this.el.parentNode){this.el.parentNode.scrollTop=99999}},handleHeightChange:function(){if(this.getVisibleCurrentCell()){this.updateHeaderPosition();this.positionHeader(!0)}},getHeaderHeight:function(){for(var id in this.browserSupportViewsById){var view=this.browserSupportViewsById[id];if(view.isShown){return view.headerEl.clientHeight}}},setViewMode:function(newMode){this.el.parentNode.classList.remove(this.currentViewMode);this.el.parentNode.classList.add(newMode);this.currentViewMode=newMode;this.handleShownChange();if(newMode===ViewMode.DATE_RELATIVE){this.setDateRelativeHeight()}else{this.el.style.height=''}},forceShowAll:function(){var views=this.browserSupportViewsById;for(var id in views){views[id].forceShowAll()}
this.handleShownChange();this.set('forcedShowing',!0);this.toggleShowButton(!1)},toggleShowButton:function(show){var button=this.featureView.showAllVersionsButton;if(show){button.innerHTML='Show all';button.removeAttribute('disabled')}else{button.innerHTML='Showing all';button.setAttribute('disabled','disabled')}},resetShown:function(){var views=this.browserSupportViewsById;for(var id in views){views[id].resetShown()}
this.set('forcedShowing',!1)},handleShownChange:function(){var views=this.browserSupportViewsById;var isNormal=(this.currentViewMode===ViewMode.NORMAL);var isUsageRelative=(this.currentViewMode===ViewMode.USAGE_RELATIVE);var hideFiller=isUsageRelative;var forcedShowing=(this.get('forcedShowing')===!0);if(isUsageRelative){}else{if(forcedShowing){this.resetShown()}
this.toggleShowButton(!0)}
var maxHeight=0;var id,view;var numNotesVisible={};for(id in views){view=views[id];if(view.isShown){view.findShownNumNotes(numNotesVisible)}
if(hideFiller){views[id].hideFiller()}else{maxHeight=Math.max(maxHeight,view.getShownOldVersionCount())}}
if(!hideFiller){for(id in views){view=views[id];view.updateFiller(maxHeight)}}
if(isNormal){this.handleCellSizeChange();this.hideBrowserNotes()}
if(isNormal||isUsageRelative){this.featureListModel.emit('heightChange')}else{this.setDateRelativeHeight()}
this.updateNotesToShow(numNotesVisible)},updateNotesToShow:function(numNotesVisible){var nums=Object.keys(numNotesVisible);this.featureView.updateNotesToShow(nums)},handleVersionSelection:function(versionSupportView){if(this.tooltipTimer){clearTimeout(this.tooltipTimer);this.tooltipTimer=null}
this.tooltip.className='support-tooltip';var versionEl=versionSupportView.el;var versionModel=versionSupportView.versionModel;var supportValue=versionSupportView.supportValue;Dom.empty(this.tooltip);var frag=makeElem();var era=versionModel.era;var eraText;if(era<0){eraText=Math.abs(era)+(era==-1?' version':' versions')+' old'}else if(era===0){eraText='current version'}else{eraText='future version'}
var versionName=Caniuse.Utils.getBrowserVersionTitle(versionModel.browserModel.name,versionModel.versionNumber,era);if(versionModel.releaseDate){var dateParts=versionModel.releaseDate.toString().split(' ');var releaseDate=dateParts[1]+' '+ +dateParts[2]+', '+dateParts[3]}
var supportText=supportValue.text;if(supportValue.isDisabled){supportValue.text='Not supported by default, but can be enabled'}
if(supportValue.isPrefixed){var prefix=this.getPrefix(versionSupportView);var text=' with prefix: ';if(supportValue.isDisabled){text='. Requires prefix: '}
supportText=[supportValue.text,text,makeElem('code',{'class':'prefix'},prefix)]}
var supportInfo=makeElem('p',{'class':'tooltip-info'},supportText);frag.appendChild(makeElem('h4',{'class':'tooltip-heading'},versionName));var supportSection=makeElem('div',{'class':'tooltip__support'},[makeElem('h6',{'class':'tooltip__section-heading'},'Support info')]);var browserSection=makeElem('div',{'class':'tooltip__browser'},[makeElem('h6',{'class':'tooltip__section-heading'},'Browser version')]);frag.appendChild(makeElem('div',{'class':'tooltip__columns'},[supportSection,makeElem('hr',{'class':'tooltip__separator'}),browserSection]));supportSection.appendChild(supportInfo);if(versionModel.releaseDate){browserSection.appendChild(makeElem('p',{'class':'tooltip-info'},'Released '+releaseDate))}
browserSection.appendChild(makeElem('h5',{'class':'tooltip-subheading'},'Usage'));var primaryUsageId=Caniuse.config.primary_usage.value;var usageList=makeElem('dl',{'class':'tooltip-usage'});var usageDataById=versionModel.usageDataById;for(var usageId in usageDataById){var data=usageDataById[usageId];var attrs=null;if(usageId==primaryUsageId){attrs={'class':'tooltip-primary-usage'}}
usageList.appendChild(makeElem('dt',attrs,data.name+": "));usageList.appendChild(makeElem('dd',attrs,data.percentage+"%"))}
browserSection.appendChild(usageList);var notesByNum=this.featureModel.sourceData.notes_by_num;var noteNumCount=supportValue.noteNumbers.length;if(noteNumCount){supportSection.appendChild(makeElem('h5',{'class':'tooltip-subheading'},'Notes'));var parent=makeElem('ul',{'class':'tooltip-list'});for(var i=0;i<supportValue.noteNumbers.length;i++){var num=supportValue.noteNumbers[i];var note=notesByNum[num];var noteElem=makeElem('li',{'class':'tooltip-note'});noteElem.innerHTML=parseText(note);var noteTag=makeElem('span',{'class':'num-tag num-tag--'+num},num);Dom.prepend(noteElem,noteTag);parent.appendChild(noteElem)}
supportSection.appendChild(parent)}
this.tooltip.appendChild(frag);this.tooltip.classList.add(supportValue.supportLevel.letter);this.el.parentNode.appendChild(this.tooltip);this.positionTooltip(versionEl)},getPrefix:function(view){var rawPrefix=view.versionModel.prefix;rawPrefix=checkPrefix(rawPrefix,view.featureModel.id);var prefixText;switch(view.featureModel.prefixType){case 'js-lower':prefixText=rawPrefix;break;case 'css':prefixText='-'+rawPrefix+'-';break;case 'js-upper':prefixText=rawPrefix.substr(0,1).toUpperCase()+rawPrefix.substr(1);prefixText=prefixText.replace('Webkit','WebKit');break;default:prefixText=rawPrefix}
return prefixText},positionTooltip:function(refEl){var offsetX=0;var offsetY=0;var GAP=3;var parent=refEl;var refHeight=refEl.offsetHeight;var refWidth=refEl.offsetWidth;var width=this.tooltip.offsetWidth;var height=this.tooltip.offsetHeight;var scrollY=this.el.parentNode.scrollTop;var scrollX=this.el.parentNode.scrollLeft;while(parent!=this.el.parentNode){offsetX+=parent.offsetLeft;offsetY+=parent.offsetTop;parent=parent.parentNode}
offsetY-=scrollY;offsetX+=refWidth+GAP-scrollX;this.tooltip.style.borderLeftWidth='';this.tooltip.style.borderRightWidth='';if(offsetX+width>parent.offsetWidth){offsetX-=(width+refWidth+GAP*2-1);refEl.classList.add('selected--left');this.tooltip.classList.add('support-tooltip--left');this.tooltip.classList.remove('support-tooltip--right')}else{refEl.classList.add('selected--right');this.tooltip.style.borderLeftWidth=0;this.tooltip.classList.remove('support-tooltip--left');this.tooltip.classList.add('support-tooltip--right')}
offsetY+=refHeight/2;offsetY-=height/2;this.tooltip.style.left=offsetX+'px';this.tooltip.style.top=offsetY+'px';this.tooltip.setAttribute('aria-hidden','false')},handleVersionUnSelection:function(versionSupportView){versionSupportView.el.classList.remove('selected--left');versionSupportView.el.classList.remove('selected--right');this.startTooltipHide()},startTooltipHide:function(){var tooltip=this.tooltip;this.tooltipTimer=setTimeout(function(){Dom.remove(tooltip)},100);tooltip.setAttribute('aria-hidden','true')},makeBrowserListViews:function(){var browsersById=this.browserListModel.browsersById;this.browserSupportViewsById={};for(var browserId in browsersById){var browserModel=browsersById[browserId];var view=new BrowserSupportView(browserModel,this.featureModel);view.on('toggleNotes',this.toggleBrowserNotes,this);this.browserSupportViewsById[browserId]=view;this.el.appendChild(view.el)}},toggleBrowserNotes:function(data){if(!this.browserNotesState){this.showBrowserNotes(data)}else if(this.browserNotesState===data.browserId){this.hideBrowserNotes()}else{this.showBrowserNotes(data)}},makeTooltipElement:function(){this.tooltip=makeElem('div',{'class':'support-tooltip','role':'tooltip','id':'tooltip--'+this.featureModel.id,'aria-hidden':'true'})},makeBrowserNotesElement:function(){this.browserNotesEl=makeElem('div',{'class':'browser-notes  hidden','role':'tooltip','aria-hidden':'true'})},hideBrowserNotes:function(){Dom.remove(this.browserNotesEl);this.lastRefEl=null;this.browserNotesState=null},showBrowserNotes:function(data){this.browserNotesState=data.browserId;var refEl=data.refEl;this.lastRefEl=refEl;var notesContent=data.notes;var closeButton=makeElem('button',{'class':'browser-note-close'},['✕'],{click:this.hideBrowserNotes.bind(this)});this.el.appendChild(this.browserNotesEl);Dom.empty(this.browserNotesEl);Dom.show(this.browserNotesEl);var contentEl=makeElem('div');contentEl.innerHTML='<span class="browser-note-symbol">*</span>'+parseText(data.notes);Dom.append(this.browserNotesEl,[closeButton,contentEl]);this.positionBrowserNotes(refEl)},positionBrowserNotes:function(refEl){refEl=refEl||this.lastRefEl;if(!this.browserNotesEl.parentNode){return}
var headerEl=refEl.firstChild;var top=refEl.offsetTop;var left=refEl.offsetLeft;var style=this.browserNotesEl.style;var headerOffset=headerEl.offsetTop+headerEl.offsetHeight;var borderColor=getComputedStyle(headerEl).borderBottomColor;this.browserNotesEl.style.borderColor=borderColor;var noteWidth=this.browserNotesEl.offsetWidth;var refX=left+refEl.offsetWidth/2;var halfWidth=noteWidth/2;var finalLeft=Math.max(0,refX-halfWidth);var root=this.el;var rightDiff=(root.offsetLeft+root.offsetWidth)-(finalLeft+noteWidth);if(rightDiff<0){finalLeft+=rightDiff}
style.top=headerOffset+top+'px';style.left=finalLeft+'px'},updateShownAgents:function(){this.handleCellSizeChange()}});return FeatureSupportView}());var BaseVersionView=Stapes.subclass({getEraClass:function(eraNum){var eraClass;if(eraNum<0){eraClass='past'}else if(eraNum===0){eraClass='current'}else{eraClass='future'}
return eraClass},onPrimaryUsageChange:function(){var viewMode=this.featureModel.get('viewMode');this.onViewModeChange(viewMode)},onShownChange:function(){var viewMode=this.featureModel.get('viewMode');switch(viewMode){case ViewMode.NORMAL:this.styleFromShown();break}},styleFromShown:function(){var isShown=this.versionModel.get('isShown');var includeCurrent=Caniuse.config.include_current.value;if(this.versionModel.era<0){Dom.toggle(this.el,isShown);this.isShown=isShown}else if(!includeCurrent){if(isShown){this.el.style.visibility='visible'}else{this.el.style.visibility='hidden'}
this.isShown=isShown}else{this.el.style.visibility='visible';Dom.show(this.el);this.isShown=!0}},onViewModeChange:function(newMode){this.el.setAttribute('style','');switch(newMode){case ViewMode.NORMAL:this.styleFromShown();break;case ViewMode.USAGE_RELATIVE:this.styleFromUsage();break;case ViewMode.DATE_RELATIVE:Dom.show(this.el);this.styleFromDate();break}},forceShow:function(){Dom.show(this.el);this.isShown=!0},resetShown:function(){var model=this.featureModel||this.summaryModel;if(model.get('viewMode')===ViewMode.NORMAL){this.styleFromShown(this.versionModel.get('isShown'))}},styleFromDate:function(){var releaseDate=this.versionModel.releaseDate;if(!releaseDate){this.el.style.display='none';return}
this.el.style.opacity=this.isShown?1:0.5;var now=Date.now();var diff=Math.floor((now-releaseDate.getTime())/86400000);var pixels=Math.round(diff*0.5);var offset=40;this.el.style.bottom=(offset+pixels)+'px'},styleFromUsage:function(){var selectedUsage=Caniuse.config.primary_usage.value;var item=this.versionModel.usageDataById[selectedUsage];var elStyle=this.el.style;var height=item.percentage*10;var fontSize;var lineHeight;elStyle.height=height+'px';if(height<20&&height>=8){fontSize=height-2;lineHeight=height+1}else if(height<8){if(height<=1){Dom.hide(this.el)}
fontSize=0;lineHeight=0}else{fontSize=Math.min(height-10,20);lineHeight=height-4}
elStyle.fontSize=fontSize+'px';elStyle.lineHeight=lineHeight+'px'}});var VersionSupportView=BaseVersionView.subclass({constructor:function(browserVersionModel,supportValue,featureModel){this.el=null;this.versionModel=browserVersionModel;this.supportValue=supportValue;this.featureModel=featureModel;this.makeElement();this.HIGHLIGHT_CLASS='highlight';this.styleFromShown(browserVersionModel.get('isShown'));browserVersionModel.on('change:isShown',this.onShownChange,this);usageModel.on('change:primaryUsage',this.onPrimaryUsageChange,this);featureModel.on('change:viewMode',this.onViewModeChange,this);featureModel.on('noteSelected',this.onNoteSelected,this);featureModel.on('noteUnSelected',this.onNoteUnSelected,this);featureList.on('change:include_current',this.styleFromShown,this)},onNoteSelected:function(noteNum){var nums=this.supportValue.noteNumbers;var matches=(nums.indexOf(noteNum)>-1);Dom.toggleClass(this.el,this.HIGHLIGHT_CLASS,matches)},onNoteUnSelected:function(noteNum){var nums=this.supportValue.noteNumbers;var matches=(nums.indexOf(noteNum)>-1);if(matches){this.el.classList.remove(this.HIGHLIGHT_CLASS)}},makeElement:function(){var _this=this;var eraClass=this.getEraClass(this.versionModel.era);var supportClasses=this.supportValue.supportClasses;var cellClasses='stat-cell '+supportClasses+' '+eraClass;var childElements=this.makeChildren();this.el=makeElem('li',{'class':cellClasses,'aria-describedby':'tooltip--'+this.featureModel.id,'tabindex':'0'},childElements);var selectVersion=function(){_this.featureModel.selectVersion(_this)};var unSelectVersion=function(){_this.featureModel.unSelectVersion(_this)};var toggleSelectVersion=function(){if(_this.featureModel.isSelected){unSelectVersion()}else{selectVersion()}};Dom.listen(this.el,'mouseover',selectVersion);Dom.listen(this.el,'focus',selectVersion);Dom.listen(this.el,'mouseout',unSelectVersion);Dom.listen(this.el,'blur',unSelectVersion)},addNumElement:function(num){var numElem=makeElem('span',{'class':'num-tag num-tag--'+num},num);this.noteListParent.appendChild(numElem)},makeChildren:function(){var versionNumber=this.versionModel.shortVersion;var supportValue=this.supportValue;var children=[versionNumber];if(supportValue.noteNumbers.length){children.push(makeElem('h5',{'class':'note-header'},' See notes: '));this.noteListParent=makeElem('ul',{'class':'note-list'});children.push(this.noteListParent);supportValue.noteNumbers.forEach(this.addNumElement,this)}
if(supportValue.isPrefixed){var prefix=checkPrefix(this.versionModel.prefix,this.featureModel.id);var prefixEl=makeElem('code',{'class':'cell-prefix'},prefix);children.push(prefixEl)}
return children}});var VersionSummaryView=BaseVersionView.subclass({constructor:function(browserVersionModel,summaryModel){this.el=null;this.versionModel=browserVersionModel;this.summaryModel=summaryModel;this.makeElement();this.styleFromShown(browserVersionModel.get('isShown'));browserVersionModel.on('change:isShown',this.styleFromShown,this);browserVersionModel.on('usageDataChange',this.usageUpdated,this);summaryModel.on('change:viewMode',this.onViewModeChange,this);summaryModel.on('summaryChanged',this.updateElement,this);Caniuse.mediator.subscribe('accessible_colors',this.updateElement,this)},usageUpdated:function(){this.el.setAttribute('title',this.makeTooltip())},makeTooltip:function(){var tooltip='';if(this.supportValue){var legendData=Caniuse.data.supportLegend;var letter=this.supportValue.supportLevel.letter;tooltip+=('('+legendData[letter]+")")}
var usageDataById=this.versionModel.usageDataById;for(var usageId in usageDataById){var data=usageDataById[usageId];tooltip+="\r "+'usage - '+data.name+': '+data.percentage+'%'}
return tooltip},updateElement:function(){var summary=this.summaryModel;var version=this.versionModel;var browserId=version.browserModel.id;var amount=summary.dataByBrowser[browserId][version.id];var fraction=amount/summaryModel.shownCount;var perc=Math.round(fraction*100,0);this.el.setAttribute('style',this.makeStyle(fraction));this.percEl.innerHTML=perc},makeStyle:function(fraction){var red,green,blue;var blackAndWhite=Caniuse.config.accessible_colors.value;if(blackAndWhite){red=green=blue=Math.round(fraction*150)+104}else{if(fraction<=0.5){red=255;green=fraction*255*2}else{red=fraction*-255+(255*1.5);green=255}
red=Math.round(red);green=Math.round(green);blue=50}
var cellStyle='background-color: rgb('+red+','+green+','+blue+')';return cellStyle},makeElement:function(){var eraClass=this.getEraClass(this.versionModel.era);var cellClasses='stat-cell stat-cell--summary '+eraClass;var tooltip=this.makeTooltip();var versionNumber=this.versionModel.id;if(versionNumber.indexOf('-')>-1){versionNumber=versionNumber.split('-')[1]}
versionNumber+=': ';this.percEl=makeElem('span',{'class':'percentage'});this.el=makeElem('li',{'class':cellClasses,'title':tooltip},[versionNumber,this.percEl,makeElem('span',{'class':'suffix'},'%')]);this.updateElement()}});var BaseBrowserView=Stapes.subclass({constructor:function(browserModel){this.browserModel=browserModel;this.viewsByVersion={};this.makeListElem();this.makeVersionViews();this.resetShown();browserModel.on('change:isShown',this.toggleDisplay,this);this.oldVersionCount=0},makeListElem:function(){this.listParent=makeElem('ol');this.cellFiller=makeElem('div',{'class':'cell-filler'});var header=makeElem('h4',{'class':'browser--'+this.browserModel.id},this.browserModel.name);this.headerEl=header;var browserNotes=Caniuse.data.browserNotes[this.browserModel.id];if(browserNotes){header.appendChild(makeElem('a',{'class':'browser-note-symbol',href:'#'},['*']));header.classList.add('browser-has-notes');Dom.listen(header,'click',function(evt){evt.preventDefault();this.emit('toggleNotes',{browserId:this.browserModel.id,refEl:this.el,notes:browserNotes})}.bind(this))}
var lastEraClass='last-era-'+this.browserModel.lastEra;this.el=makeElem("div",{"class":"support-list "+lastEraClass},[header,this.cellFiller,this.listParent])},updateHeaderText:function(size){var needShortText=(size<=4);var name=needShortText?this.browserModel.shortName:this.browserModel.name;this.headerEl.firstChild.textContent=name;var nameIsDifferent=(name!==this.browserModel.name);this.headerEl.title=nameIsDifferent?this.browserModel.name:''},getBrowserDatePoints:function(){var refEra=Infinity;var firstCell,lastCell;for(var id in this.viewsByVersion){var view=this.viewsByVersion[id];var era=view.versionModel.era;if(era<refEra){firstCell=view.el;refEra=era}
if(era===0){lastCell=view.el}}
var top=parseInt(firstCell.style.bottom);var bottom=parseInt(lastCell.style.bottom);return{top:top,bottom:bottom}},makeDateLine:function(points){var line=this.cellFiller;line.style.bottom=(points.bottom+30)+'px';line.style.height=(points.top-points.bottom)+'px'},findShownNumNotes:function(noteObj){var viewsByVersion=this.viewsByVersion;for(var id in viewsByVersion){var view=viewsByVersion[id];if(!view.isShown){continue}
var noteNumbers=view.supportValue.noteNumbers;if(!noteNumbers.length){continue}
for(var i=0;i<noteNumbers.length;i++){noteObj[noteNumbers[i]]=!0}}},toggleDisplay:function(show){Dom.toggle(this.el,show);this.isShown=show},toggleFixed:function(isFixed){var style=this.headerEl.style;if(isFixed){var rect=this.headerEl.getBoundingClientRect();var width=this.headerEl.clientWidth;var height=this.headerEl.clientHeight;style.left=rect.left+'px';style.width=width+'px';style.top='0px'}else{style.left='';style.width=''}},hideFiller:function(){this.cellFiller.style.height='0px'},updateFiller:function(maxCellCount){var cellFillerCount=maxCellCount-this.oldVersionCount;var height;if(cellFillerCount===0){height=0}else{var cellHeight=cellFillerCount*CELL_HEIGHT;var gapHeight=(cellFillerCount-1)*CELL_GAP;height=cellHeight+gapHeight}
this.cellFiller.style.height=height+'px'},getShownOldVersionCount:function(){if(!this.isShown){this.oldVersionCount=0;return 0}
var versionArray=this.browserModel.versionArray;var count=0;for(var i=0;i<versionArray.length;i++){var version=versionArray[i];var versionId=version.id;var era=version.era;var isShown=this.viewsByVersion[versionId].isShown;if(era<0&&isShown){count++}}
this.oldVersionCount=count;return count},forceShowAll:function(){this.toggleDisplay(!0);var viewsByVersion=this.viewsByVersion;for(var id in viewsByVersion){viewsByVersion[id].forceShow()}},resetShown:function(){this.toggleDisplay(this.browserModel.get('isShown'));var viewsByVersion=this.viewsByVersion;for(var id in viewsByVersion){viewsByVersion[id].resetShown()}}});var BrowserSupportView=BaseBrowserView.subclass({constructor:function(browserModel,featureModel){this.featureModel=featureModel;BaseBrowserView.prototype.constructor.apply(this,arguments)},makeVersionViews:function(){var versionArray=this.browserModel.versionArray;var supportData=this.featureModel.supportDataByBrowser;var browserId=this.browserModel.id;var supportViewsByVersion=this.viewsByVersion;for(var i=0;i<versionArray.length;i++){var versionModel=versionArray[i];var versionId=versionModel.id;var item=supportData[browserId][versionId];if(!item){console.log('missing support data for browser: '+browserId+' '+versionId+', feat: '+this.id);continue}
var supportValue=item.supportValue;var supportView=new VersionSupportView(versionModel,supportValue,this.featureModel);this.listParent.appendChild(supportView.el);supportViewsByVersion[versionId]=supportView}}});var BrowserSummaryView=BaseBrowserView.subclass({constructor:function(browserModel,summaryModel){this.summaryModel=summaryModel;BaseBrowserView.prototype.constructor.apply(this,arguments)},makeVersionViews:function(){var versionArray=this.browserModel.versionArray;var browserId=this.browserModel.id;var summaryViewsByVersion=this.viewsByVersion;for(var i=0;i<versionArray.length;i++){var versionModel=versionArray[i];var summaryView=new VersionSummaryView(versionModel,this.summaryModel);this.listParent.appendChild(summaryView.el);summaryViewsByVersion[versionModel.id]=summaryView}}});var handleSupportData=function handleSupportData(processedData){allData=processedData};var handleDOMReady=function handleDOMReady(){var processedData=allData;usageModel.add(processedData.globalUsage);browserListModel=new BrowserListModel(processedData.browsers);Caniuse.browserListModel=browserListModel;featureList=new FeatureListModel(processedData,browserListModel);summaryModel=new SummaryModel(featureList,browserListModel);var summaryView=new SummaryView(summaryModel,browserListModel);featureListView=new FeatureListView(featureList,summaryView);var optionTagsView=new OptionTagsView(featureList);mediator.publish("featureListReady",featureListView);mediator.publish("optionTagsReady",optionTagsView)};function onWindowResize(){}
function updateList(data){}
function scrollToList(){var el=featureListView.el.parentElement;var rect=el.getBoundingClientRect();scroll(0,rect.top+document.body.scrollTop)}
mediator.subscribe("browserSetReady",function(browserSet){browserListModel.readBrowserSet(browserSet);if(Caniuse.config.primary_browserset.value===browserSet.name){browserListModel.filterByBrowserSet(browserSet)}});mediator.subscribe("searchChanged",function(searchQuery){Caniuse.mediator.publish("displayPageSection","tables");featureList.set('search',searchQuery)});mediator.subscribe("listFilteredBySearch",function(data){Caniuse.resetSettings(['feat','cats','statuses']);Caniuse.mediator.publish("displayPageSection","tables")});mediator.subscribe("configChanged",function(data){var optionId=data.option;var values=data.values;if(values==Caniuse.configVal.NOT_APPLICABLE){return}
switch(optionId){case "search":if(values.length&&data.changeSource==Caniuse.changeType.URL){Caniuse.resetSettings(['feat','cats','statuses'])}
featureList.set('search',values);Caniuse.mediator.publish("displayPageSection","tables");break;case "feat":if(values.length&&data.changeSource==Caniuse.changeType.URL){Caniuse.resetSettings(['search','cats','statuses'])}
featureList.set('feat',values);break;case "agents":if(featureList){featureList.updateBrowsers(values)}
break;case "usage_threshold":usageModel.set('usageThreshold',values);break;case 'include_current':featureList.set(optionId,values);break;case "cats":case "statuses":var matchesDefault=Caniuse.config[optionId].matchesDefault();if(!matchesDefault){Caniuse.resetSettings(['feat','search'])}
featureList.set(optionId,values);break;case 'primary_usage':usageModel.set('primaryUsage',values);break;case 'primary_browserset':if(featureList){if(values!==''){var currentSet=Caniuse.getBrowserSet();currentSet.fetchArray().then(function(arr){featureList.applyBrowserSet(currentSet)})}else{browserListModel.filterByBrowserSet()}}
break;case 'feature_sort':featureList.set('sortOrder',values);Caniuse.mediator.publish("displayPageSection","tables");break;case 'custom_usage_id':break;default:return}});function handleUsageDataReceived(args){if(args.initialRequest){var usageData=args.usageData;handleUsageDataFound(usageData);if(!args.updateOnly){Caniuse.config.primary_usage.setValue(usageData.uid)}}}
function handleUsageDataFound(usageData){if(usageData.uid!='region.global'){usageModel.add(usageData)}}
mediator.subscribe("supportDataReady",handleSupportData);mediator.subscribe("domReady",handleDOMReady);mediator.subscribe("usageDataReceived",handleUsageDataReceived);mediator.subscribe("usageDataFound",handleUsageDataFound);mediator.subscribe('deleteUsageRequest',function(usageId){usageModel.remove(usageId)});mediator.subscribe("pageSectionDisplayed",function(pageId,params){if(pageId===PAGE_ID){if(isSectionDisplayed){return}
featureList.initialDisplay();isSectionDisplayed=!0;var scrollToContent=(!params||!params.blockScroll);if(scrollToContent){if(!Caniuse.config.feat.matchesDefault()||!Caniuse.config.search.matchesDefault()||!Caniuse.config.cats.matchesDefault()||!Caniuse.config.statuses.matchesDefault()){scrollToList()}}}else{isSectionDisplayed=!1}});mediator.subscribe('optionsInitialized',function(){browserListModel.getMissingUsage()});Caniuse.mediator.subscribe("hashProcessed",function(data){var params=data.parameters;var navToList=!1;if(!params){return}
for(var key in params){if(!params[key]){continue}
switch(key){case "search":case "feat":case "cats":case "statuses":navToList=!0;break}}
if(navToList){Caniuse.mediator.publish("displayPageSection","tables")}});Caniuse.mediator.subscribe('optionsToggled',function(viewState,isInitial){if(!isInitial){if(location.hash.indexOf('=')===-1){Caniuse.mediator.publish('hashChangeRequest','tables')}}});Dom.listen(window,'resize',onWindowResize);Dom.listen(window,'scroll',function(){Caniuse.mediator.publish("scroll",window.pageYOffset)});Dom.listen(window,'keyup',function(evt){if(evt.keyCode===27){Caniuse.mediator.publish("escapeKey",null)}});Caniuse.SupportLevel=SupportLevel;Caniuse.SupportLevelValue=SupportLevelValue;Caniuse.SupportValue=SupportValue})(Caniuse);(function searchManager(Caniuse){"use strict";var searchInput=null;var messageEl=null;var urlUpdateDelay=1000;var delayTimeout=null;var setting=Caniuse.config.search;var Dom=Caniuse.Utils.Dom;var loggedSearches={};var searchLogger;function updateInputFromURL(value){searchInput.value=value.trim();if(!value.length){clearInput()}}
function throttleSearchValueSet(query){clearTimeout(delayTimeout);delayTimeout=setTimeout(function(){setting.setValueFromUI(query);if(query.length&&window.ga){ga('send','event','ciu-search',query,'Caniuse search')}},urlUpdateDelay)}
function logResult(query){clearTimeout(searchLogger);searchLogger=setTimeout(function(){if(!loggedSearches[query]){Caniuse.Utils.ajax('/process/search_log.php?s='+query,{success:function(){}});loggedSearches[query]=!0}},1000)}
function handleFilteredResult(data){var amount=data.amount;var query=(searchInput.value||setting.value).trim();var message=amount+' result'+(amount===1?'':'s')+' found';if(amount===0){message+='.<p>Why not <a href="https://github.com/Fyrd/caniuse/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+'+encodeURI(query)+'">suggest this feature be added?</a></p>';logResult(query)}
messageEl.innerHTML=message;Dom.show(messageEl)}
function initSearch(inputElement,messageOutputElement){searchInput=inputElement;messageEl=messageOutputElement;var handleSearchInput=function(){var currentQuery=searchInput.value.trim();setTimeout(function(){Caniuse.mediator.publish("searchChanged",currentQuery);throttleSearchValueSet(currentQuery);if(currentQuery===''){messageEl.innerHTML='';Dom.hide(messageEl)}},0)};Dom.hide(messageEl);Dom.listen(searchInput,'focus',function(){if(searchInput.value.length>0){Caniuse.mediator.publish('searchFocused')}});Dom.listen(searchInput,'input',handleSearchInput);if(navigator.userAgent.toLowerCase().indexOf('mobile')>-1){searchInput.removeAttribute('autofocus');searchInput.blur()}else{searchInput.focus()}
if(searchInput.value.length){handleSearchInput()}}
function clearInput(){searchInput.value='';Dom.hide(messageEl)}
Caniuse.mediator.subscribe("listFilteredBySearch",handleFilteredResult);Caniuse.mediator.subscribe("searchInputReady",initSearch);Caniuse.mediator.subscribe("configChanged",function(data){if(data.option==="search"){if(data.changeSource===Caniuse.changeType.URL&&typeof data.values==="string"){updateInputFromURL(data.values)}else if(data.values===Caniuse.configVal.NOT_APPLICABLE){clearInput()}}else if(data.option==="cats"&&data.changeSource===Caniuse.changeType.UI){clearInput()}else if(data.option==='feat'&&data.values.length>0){searchInput.blur()}})})(Caniuse);(function browserComparison(Caniuse){"use strict";var allData;var featureList;var initialized=!1;var loadingFromURL=!1;var sectionContainer;var makeElem=Caniuse.Utils.makeElem;var Dom=Caniuse.Utils.Dom;var getElem=Caniuse.Utils.getElem;var optionsContainer,contentContainer;var selectedBrowsers={};var selectedCategories=null;var PAGE_ID="comparison";function getSupportData(feature){var supportDataByBrowser=feature.supportDataByBrowser;var browsers=Caniuse.data.browsers;var standardSupport=!0;var somePrefixSupport=!1;var partialSupport=!0;var totalAmount=0;var supportList=[];for(var key in selectedBrowsers){var selected=selectedBrowsers[key];var selBrowser=selected.browser;var selVersion=selected.version;var supportItem=supportDataByBrowser[selBrowser][selVersion];supportItem.browserData=browsers[selBrowser];supportItem.version=selVersion;var supportData=supportItem.supportValue;var isPrefixed=supportData.isPrefixed;var amount=supportData.supportLevel.amount;totalAmount+=amount;if(amount<1){standardSupport=!1;if(amount===0){partialSupport=!1}}
if(isPrefixed){somePrefixSupport=!0}
supportList.push(supportItem)}
return{feature:feature,standardSupport:standardSupport,somePrefixSupport:somePrefixSupport,partialSupport:partialSupport,supportList:supportList,totalAmount:totalAmount}}
function addHeaderCells(rowElement,supportList){for(var i=0;i<supportList.length;i++){var item=supportList[i];var browserData=item.browserData;var era=browserData.dataByVersion[item.version].era;var cellContent=Caniuse.Utils.getBrowserVersionTitle(browserData.browser,item.version,era);var cell=makeElem('th',{'class':'browser  browser--'+browserData.id},cellContent);rowElement.appendChild(cell)}}
function getPrefix(browser,version){return Caniuse.data.browsers[browser].dataByVersion[version].prefix}
function addSupportCells(rowElement,supportList){for(var i=0;i<supportList.length;i++){var item=supportList[i];var cellContent;var supportClasses=item.supportValue.supportClasses.replace('x','');switch(item.supportValue.supportLevel.letter){case 'y':cellContent='Yes';break;case 'a':cellContent='Partial';break;case 'n':case 'u':case 'p':cellContent='No';break;default:cellContent='???'}
var cellChildren=[cellContent];if(item.supportValue.isPrefixed){var prefix=getPrefix(item.browserData.id,item.version);var prefixElem=makeElem('span',{'class':'pre'},'-'+prefix+'-');cellChildren.push(prefixElem)}
var cell=makeElem('td',{'class':supportClasses},cellChildren);rowElement.appendChild(cell)}}
function supportSort(itemA,itemB){var diff=itemB.totalAmount-itemA.totalAmount;var result=0;if(diff===0){for(var i=0;i<itemA.supportList.length;i++){var supportDataA=itemA.supportList[i].supportValue;var supportDataB=itemB.supportList[i].supportValue;var amountA=supportDataA.supportLevel.amount;var amountB=supportDataB.supportLevel.amount;var subDiff=amountB-amountA;if(subDiff!==0){result=subDiff;break}}}else{result=diff}
if(result===0){var catA=itemA.feature.sourceData.categories.join('');var catB=itemB.feature.sourceData.categories.join('');result=catA>catB?1:-1}
return result}
function makeSupportList(title,supportArr,cssClass){if(!supportArr.length){return}
supportArr.sort(supportSort);var listContainer=makeElem('ul',{'class':'comparison-list'});var comparisonList=makeElem('div',null,[makeElem('h3',{'class':'compare-sub-heading'},title),listContainer]);for(var i=0;i<supportArr.length;i++){var feature=supportArr[i].feature;var featureId=feature.id;var itemTitle=feature.sourceData.title;var elem=makeElem('li',{'class':cssClass},[makeElem('a',{'href':'#feat='+featureId,'class':'comparison-feature-link'},itemTitle)]);listContainer.appendChild(elem)}
contentContainer.appendChild(comparisonList);if(listContainer.offsetHeight>200){listContainer.classList.add('useColumns')}}
function makeComparisonTable(title,comparisonArr){if(!comparisonArr.length){return}
comparisonArr.sort(supportSort);var tbody=makeElem('tbody');var headRow=makeElem('tr',null,[makeElem('th')]);addHeaderCells(headRow,comparisonArr[0].supportList);var caption=makeElem('caption',null,title);var thead=makeElem('thead',null,[headRow]);var table=makeElem('table',{'class':'browser-comparison'},[caption,thead,tbody]);for(var i=0;i<comparisonArr.length;i++){var item=comparisonArr[i];var itemTitle=item.feature.sourceData.title;var itemLink=makeElem('a',{'href':'#feat='+item.feature.id,'class':'comparison-feature-link'},itemTitle);var rowHead=makeElem('th',null,[itemLink]);var row=makeElem('tr',null,[rowHead]);addSupportCells(row,item.supportList);tbody.appendChild(row)}
contentContainer.appendChild(table)}
function getFilteredFeatures(){var featuresById=featureList.featuresById;if(!selectedCategories){return featuresById}
var filteredFeatures={};for(var featId in featuresById){var feature=featuresById[featId];var categories=feature.sourceData.baseCategories;for(var i=0;i<categories.length;i++){var catId=categories[i];if(selectedCategories[catId]===!0){filteredFeatures[featId]=feature}}}
return filteredFeatures}
function updateComparison(){var featuresById=getFilteredFeatures();var standardSupportArr=[];var prefixedSupportArr=[];var partialSupportArr=[];var comparisonArr=[];var noSupportArr=[];var bucket;for(var featId in featuresById){var feature=featuresById[featId];var rowData=getSupportData(feature);if(rowData.standardSupport){if(rowData.somePrefixSupport){bucket=prefixedSupportArr}else{bucket=standardSupportArr}}else if(rowData.partialSupport){bucket=partialSupportArr}else if(rowData.totalAmount===0){bucket=noSupportArr}else{bucket=comparisonArr}
bucket.push(rowData)}
Dom.empty(contentContainer);makeSupportList('Supported (no prefixes needed)',standardSupportArr,'y');makeComparisonTable('Supported (some prefix)',prefixedSupportArr);makeComparisonTable('At least partially supported',partialSupportArr);makeComparisonTable('Mixed support',comparisonArr);makeSupportList('No support',noSupportArr,'n')}
function categoriesChanged(categoryList){selectedCategories={};for(var i=0;i<categoryList.length;i++){var category=categoryList[i];selectedCategories[category]=!0}
updateComparison()}
function parseBrowserVersion(browserString){if(!browserString){return null}
var parts=browserString.split('+');var browserId=parts[0];var version=parts[1];return{browser:browserId,version:version}}
function browsersChanged(browserList){selectedBrowsers={};for(var i=0;i<browserList.length;i++){var browserData=parseBrowserVersion(browserList[i]);if(!browserData){continue}
selectedBrowsers[browserList[i]]=browserData}
updateComparison()}
function makeCategoryOptions(){var fieldset=makeElem('fieldset',{'class':'compare-options__category'});var catSet=new Caniuse.CategoryOptionSet();catSet.optionId='compare_cats';catSet.init(allData);catSet.installTo(fieldset);optionsContainer.appendChild(fieldset);var legend=makeElem('legend',null,'Categories');fieldset.insertBefore(legend,fieldset.firstChild)}
function makeBrowserOptions(browsers){var fieldsetContainer=makeElem('div',{'class':'compare-options__browser'});var browserSet=new Caniuse.BrowserVersionOptionSet();browserSet.init(browsers);browserSet.installTo(fieldsetContainer);optionsContainer.appendChild(fieldsetContainer);Caniuse.mediator.subscribe("configChanged",function(data){if(data.changeSource!==Caniuse.changeType.UI){browserSet.updateFromConfig()}})}
function makeOptions(){makeCategoryOptions();var browsers=allData.browsers;makeBrowserOptions(browsers)}
function dataReady(caniuseData){allData=caniuseData}
function init(){if(initialized){return}
var note='Select browsers to compare';var heading=makeElem('h3',{'class':'ciu-section-heading compare-heading'},note);sectionContainer=Caniuse.Utils.getElem('.js-section-comparison');optionsContainer=makeElem('div',{'class':'settings  compare-options'});contentContainer=makeElem('div',{'class':'compare-content'});makeOptions();sectionContainer.appendChild(optionsContainer);sectionContainer.appendChild(contentContainer);var resetButton=getElem('.browser-compare-reset',optionsContainer);Dom.prepend(optionsContainer,resetButton);Dom.insertAfter(heading,resetButton);updateFromConfig();initialized=!0}
function updateFromConfig(){var compareVals=Caniuse.config.compare.value;browsersChanged(compareVals);var compareCats=Caniuse.config.compare_cats.value;categoriesChanged(compareCats)}
var readyToLoad=new PinkySwear();Caniuse.mediator.subscribe("supportDataReady",dataReady);Caniuse.mediator.subscribe("featureListReady",function(featureListView){featureList=featureListView.model;readyToLoad(!0)});function configChanged(data){if(!initialized){return}
switch(data.option){case "compare":browsersChanged(data.values);break;case "compare_cats":categoriesChanged(data.values);break}}
Caniuse.mediator.subscribe("configChanged",function(data){if(featureList){configChanged(data)}else{readyToLoad.then(function(){configChanged(data)})}});Caniuse.mediator.subscribe("displayPageSection",function(pageId){if(pageId===PAGE_ID){init();Caniuse.resetSettings(['feat','search','cats','statuses'])}else{Caniuse.resetSettings(['compare','compare_cats'])}});Caniuse.mediator.subscribe("hashProcessed",function(data){if(data.parameters&&(data.parameters.compare||data.parameters.compare_cats)){init();Caniuse.mediator.publish("displayPageSection",PAGE_ID)}})}(Caniuse));(function statsImport(Caniuse){"use strict";var PAGE_ID="stats_import";var LOCATION_ID="stats_import";var STORAGE_KEY='ga_data';var DEFAULT_KEY='ga_default';var sectionContainer=null;var noticeElem=null;var initialized=!1;var Dom=Caniuse.Utils.Dom;var getElem=Caniuse.Utils.getElem;var makeElem=Caniuse.Utils.makeElem;var url='ga/import.php';function makeStoredTable(){var defaultAccount=Caniuse.Utils.retrieveItem(DEFAULT_KEY);var captionText='Stored data - Select a profile to load statistics';var table=makeElem('table',{'class':'data_tbl'},[makeElem('caption',null,captionText),makeElem('tr',null,[makeElem('thead',null,[makeElem('th',{style:'width:4em'},'Default'),makeElem('th',null,'Analytics Profile'),makeElem('th',null,'Start date'),makeElem('th',null,'End date'),makeElem('th')])])]);sectionContainer.appendChild(table)}
function init(){if(initialized){return}
sectionContainer=getElem('.js-section-'+PAGE_ID);Caniuse.Utils.ajax('/tpl/ga-import-html.tpl.php',{success:function(html){sectionContainer.innerHTML=html;Dom.listen(getElem('.js-close-import'),'click',hideImport);var noticeElem=makeElem('div',{id:'import_message'});sectionContainer.appendChild(noticeElem);yepnope.injectJs("js/retrieve_ga.js?1",function(){if(Caniuse.module.retrieveGA){Caniuse.module.retrieveGA.init()}
yepnope.injectJs("https://apis.google.com/js/client.js?onload=handleClientLoad",function(){})})}});var storedData=Caniuse.Utils.retrieveItem(STORAGE_KEY);initialized=!0}
function hideImport(){getElem('.js-section-tables').style.display='block';getElem('.js-section-stats_import').style.display='none'}
Caniuse.mediator.subscribe("pageSectionDisplayed",function(pageId){if(pageId===PAGE_ID){init()}else{}});Caniuse.mediator.subscribe('analyticsImportRequest',function(){getElem('.js-section-tables').style.display='none';getElem('.js-section-stats_import').style.display='block';window.scroll(0,0);init()})})(Caniuse);(function browsersetSelect(Caniuse){"use strict";var PAGE_ID="browserset_select";var LOCATION_ID="browserset_select";var sectionContainer=null;var noticeElem=null;var initialized=!1;var Dom=Caniuse.Utils.Dom;var getElem=Caniuse.Utils.getElem;var makeElem=Caniuse.Utils.makeElem;function init(name){sectionContainer=getElem('.js-section-'+PAGE_ID);if(initialized){Dom.empty(sectionContainer)}
Caniuse.Utils.ajax('/tpl/browserset-select.tpl.php',{success:function(html){sectionContainer.innerHTML=html;if(name){getElem('.js-prefix').textContent='Edit'}
Dom.listen(getElem('.js-close'),'click',hide);yepnope.injectJs("js/browserset-select.js",function(){if(Caniuse.module.browsersetSelect){Caniuse.module.browsersetSelect.init(name);Caniuse.module.browsersetSelect.on('close',function(){hide()})}})}});initialized=!0}
function hide(){getElem('.js-section-tables').style.display='block';getElem('.js-section-browserset_select').style.display='none';window.scroll(0,0)}
function showEditor(name){getElem('.js-section-tables').style.display='none';getElem('.js-section-browserset_select').style.display='block';window.scroll(0,0);init(name)}
Caniuse.mediator.subscribe("pageSectionDisplayed",function(pageId){if(pageId===PAGE_ID){init()}else{}});Caniuse.mediator.subscribe('browsersetAddRequest',showEditor);Caniuse.mediator.subscribe('browsersetEditRequest',showEditor)})(Caniuse);(function(){var initAll=function(){Caniuse.module.usageManager.init();Caniuse.module.dataManagement.init();Caniuse.module.domManager.init()};if(window.Promise){initAll()}else{yepnope.injectJs('/js/promise-polyfill.min.js',initAll)}}())